

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Using Dask to Scale Up Your Data Analaysis &#8212; Dask Tutorial</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/03-intro-dask';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Introduction to Xarray" href="01-xarray-intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/NCAR_CISL_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/NCAR_CISL_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    ESDS 2024 - Xarray and Dask Tutorial
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Xarray</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-xarray-intro.html">Introduction to Xarray</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Scaling from Single Core to HPC with Dask</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Using Dask to Scale Up Your Data Analaysis</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/NCAR/dask-tutorial/main?urlpath=lab/tree/notebooks/03-intro-dask.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://jupyterhub.hpc.ucar.edu/stable/hub/user-redirect/git-pull?repo=https%3A//github.com/NCAR/dask-tutorial&urlpath=lab/tree/dask-tutorial/notebooks/03-intro-dask.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NCAR/dask-tutorial" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NCAR/dask-tutorial/edit/main/notebooks/03-intro-dask.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NCAR/dask-tutorial/issues/new?title=Issue%20on%20page%20%2Fnotebooks/03-intro-dask.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/03-intro-dask.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Using Dask to Scale Up Your Data Analaysis</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#in-this-tutorial-you-learn">In this tutorial, you learn:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-dask">Introduction to Dask</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-dask">Why Dask?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#familiar-interface">Familiar Interface</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability">Scalability</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flexibility">Flexibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-diagnostic-tools">Built-in Diagnostic Tools</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#when-to-use-dask">When to use Dask?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-dask">Use Dask:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avoid-dask">Avoid Dask:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-components">Dask Components</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-collections">1.  Dask Collections</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#high-level-collections">High-level collections</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#low-level-collections">Low-level collections</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-task-scheduling">2. Dynamic Task Scheduling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying-dask-cluster">Deploying Dask Cluster</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-hpc-dask-clusters-with-dask-jobqueue">Starting HPC Dask clusters with <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-scheduled-cluster">Creating a scheduled-cluster</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#it-is-good-practice-to-check-your-validate-your-cluster-before-initiating-any-workers-by-outputting-the-job-script-dask-will-create">It is good practice to check your validate your cluster before initiating any workers, by outputting the job script Dask will create</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-configuration-files">Dask configuration files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#live-performance-monitoring">Live Performance Monitoring</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-multiple-netcdf-files-with-open-mfdataset">Reading Multiple NetCdf Files with <code class="docutils literal notranslate"><span class="pre">open_mfdataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xarray-data-structures-are-dask-collections">Xarray data structures are Dask collections.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-concrete-values">Getting concrete values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distributed-non-blocking-concrete-values">Distributed non-blocking concrete values</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-access-underlying-data-in-an-xarray-object">How to access underlying data in an Xarray object?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#computations-and-indexing">Computations and Indexing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-single-point-calculations">Example Single Point Calculations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations-over-all-grids">Calculations over all grids</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-and-debugging-dask">Optimization and Debugging Dask</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scaling-and-performance-report">Scaling and Performance Report</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#adaptive-scaling">Adaptive scaling</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-persisting-data-in-worker-memory">Optimization: Persisting data in worker memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-workers-case-study-memory-and-spill-to-disk">Debugging workers case study: memory and spill-to-disk</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supplementary-material-advanced-workflows-and-automatic-parallelization-using-apply-ufunc">Supplementary Material: Advanced workflows and automatic parallelization using <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-xarray-good-practices">Dask + Xarray Good Practices</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#close-you-local-dask-cluster">Close you local Dask Cluster</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resources-and-references">Resources and references</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reference">Reference</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ask-for-help">Ask for help</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <p><img src="https://raw.githubusercontent.com/NCAR/dask-tutorial/main/images/NCAR-contemp-logo-blue.png"
     width="750px"
     alt="NCAR logo"
     style="vertical-align:middle;margin:30px 0px"/></p>
<section class="tex2jax_ignore mathjax_ignore" id="using-dask-to-scale-up-your-data-analaysis">
<h1>Using Dask to Scale Up Your Data Analaysis<a class="headerlink" href="#using-dask-to-scale-up-your-data-analaysis" title="Permalink to this heading">#</a></h1>
<p><strong>ESDS 2024 Annual Event Xarray-Dask Tutorial | January 19th, 2023</strong></p>
<p>Negin Sobhani and Brian Vanderwende<br />
Computational &amp; Information Systems Lab (CISL)<br />
<a class="reference external" href="mailto:negins&#37;&#52;&#48;ucar&#46;edu">negins<span>&#64;</span>ucar<span>&#46;</span>edu</a>, <a class="reference external" href="mailto:vanderwb&#37;&#52;&#48;ucar&#46;edu">vanderwb<span>&#64;</span>ucar<span>&#46;</span>edu</a></p>
<hr class="docutils" />
<section id="in-this-tutorial-you-learn">
<h2>In this tutorial, you learn:<a class="headerlink" href="#in-this-tutorial-you-learn" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Intro to Dask</p></li>
<li><p>Dask distributed - clusters &amp; clients (30 mins)</p></li>
<li><p>Optimizing and debugging Dask (20 mins)</p></li>
</ul>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">#</a></h2>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Concepts</p></th>
<th class="head"><p>Importance</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Basic familiarity with NumPy</p></td>
<td><p>Necessary</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Basic familiarity with Pandas</p></td>
<td><p>Necessary</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Familiarity with Xarray</p></td>
<td><p>Necessary</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><strong>Time to learn</strong>: 60 minutes</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="introduction-to-dask">
<h2>Introduction to Dask<a class="headerlink" href="#introduction-to-dask" title="Permalink to this heading">#</a></h2>
<p><img src="https://raw.githubusercontent.com/NCAR/dask-tutorial/main/images/dask_horizontal.svg"
     width="500px"
     alt="NCAR logo"
     style="vertical-align:middle;margin:30px 0px"/></p>
<ul class="simple">
<li><p>Dask is an open-source Python library for parallel and distributed computing that scales the existing Python ecosystem.</p></li>
<li><p>Dask was developed to scale Python packages such as Numpy, Pandas, and Xarray to multi-core machines and distributed clusters when datasets exceed memory.</p></li>
</ul>
</section>
<section id="why-dask">
<h2>Why Dask?<a class="headerlink" href="#why-dask" title="Permalink to this heading">#</a></h2>
<section id="familiar-interface">
<h3>Familiar Interface<a class="headerlink" href="#familiar-interface" title="Permalink to this heading">#</a></h3>
<p>Dask provides interfaces which mimics significant portions of the NumPy and Pandas APIs.</p>
<p>This means Dask provides ways to parallelize Pandas, Xarray, and Numpy workflows with minimal code rewriting (no massive code-restructure or writing a script in another language). In the previous tutorial, we learned how Xarray can wrap other NumPy-like arrays.</p>
</section>
<section id="scalability">
<h3>Scalability<a class="headerlink" href="#scalability" title="Permalink to this heading">#</a></h3>
<p>Dask is designed to scale well from single machine (laptop) to thousand-node HPC clusters, and on the cloud.</p>
<p>This allows users to use their existing hardware, or add more machines as needed, to handle increasingly large and complex datasets.</p>
</section>
<section id="flexibility">
<h3>Flexibility<a class="headerlink" href="#flexibility" title="Permalink to this heading">#</a></h3>
<p>Dask provides several tools that help with data analysis on large datasets. For example, you can easily wrap your function in <code class="docutils literal notranslate"><span class="pre">dask.delayed</span></code> decorator to make it run in parallel.</p>
<p>Dask provides seamless integration with well-known HPC resource managers and job scheduling systems, including PBS, SLURM, and SGE.</p>
</section>
<section id="built-in-diagnostic-tools">
<h3>Built-in Diagnostic Tools<a class="headerlink" href="#built-in-diagnostic-tools" title="Permalink to this heading">#</a></h3>
<p>Dask provides responsive feedback via the client as well as a real-time interactive diagnostic dashboard to keep users informed on how the computation is progressing.</p>
<p>This helps users identify and resolve potential issues without waiting for the work to be completed.</p>
</section>
</section>
<section id="when-to-use-dask">
<h2>When to use Dask?<a class="headerlink" href="#when-to-use-dask" title="Permalink to this heading">#</a></h2>
<p>Here are some general guidelines for when to use Dask and when to avoid it:</p>
<section id="use-dask">
<h3>Use Dask:<a class="headerlink" href="#use-dask" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>When you have large datasets that don’t fit into memory on a single machine.</p></li>
<li><p>When you need to perform parallel computations, such as big data analysis.</p></li>
</ul>
</section>
<section id="avoid-dask">
<h3>Avoid Dask:<a class="headerlink" href="#avoid-dask" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>When you have small datasets that can be processed efficiently on a single machine.</p></li>
<li><p>When you don’t need parallel processing, as the overhead of managing a distributed computing environment may not be worth the benefits.</p></li>
<li><p>When you need to debug or troubleshoot problems, as distributed computing environments can be challenging for debugging. If the problem is complex, using Dask may make debugging more difficult.</p></li>
</ul>
</section>
</section>
<section id="dask-components">
<h2>Dask Components<a class="headerlink" href="#dask-components" title="Permalink to this heading">#</a></h2>
<p>Dask is composed of two main parts:</p>
<section id="dask-collections">
<h3>1.  Dask Collections<a class="headerlink" href="#dask-collections" title="Permalink to this heading">#</a></h3>
<p>Dask <em>Collections</em> are the user interfaces we use for parallel and distributed computing with Dask.</p>
<p>Dask features different levels of collection types:</p>
<section id="high-level-collections">
<h4>High-level collections<a class="headerlink" href="#high-level-collections" title="Permalink to this heading">#</a></h4>
<p>Dask provides high-level collections Dask Arrays, Dask DataFrames, and Dask Bags that mimic NumPy, pandas, and lists but can operate in parallel on datasets that don’t fit into memory.</p>
<p>Most of the time, you will probably use one of the following <em>high-level</em> (big) data structures (or an even higher-level derivative type like Xarrays):</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Collection</p></th>
<th class="head"><p>Serial</p></th>
<th class="head"><p>Dask</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Arrays</p></td>
<td><p>numpy.array</p></td>
<td><p>dask.array.from_array</p></td>
</tr>
<tr class="row-odd"><td><p>Dataframes</p></td>
<td><p>pandas.read_csv</p></td>
<td><p>dask.dataframe.read_csv</p></td>
</tr>
<tr class="row-even"><td><p>Unstructured</p></td>
<td><p>[1,2,3]</p></td>
<td><p>dask.bag.from_sequence([1,2,3])</p></td>
</tr>
</tbody>
</table>
</section>
<section id="low-level-collections">
<h4>Low-level collections<a class="headerlink" href="#low-level-collections" title="Permalink to this heading">#</a></h4>
<p>Dask also features two <em>low-level</em> collection types - <code class="docutils literal notranslate"><span class="pre">delayed</span></code> and <code class="docutils literal notranslate"><span class="pre">futures</span></code>.  These collections give users finer control to build custom parallel and distributed computations.</p>
<ul class="simple">
<li><p><strong>delayed</strong> - run any arbitrary Python function using Dask task parallelism (think looped function calls)</p></li>
<li><p><strong>futures</strong> - similar to delayed but allows for concurrent commands in the client script (think backgrounded processes)</p></li>
</ul>
<p>These are very powerfull tools, but it is easy to write something using a delayed function that could be executed faster and more simply using a high-level collection</p>
<p><img src="https://raw.githubusercontent.com/NCAR/dask-tutorial/main/images/high_vs_low_level_coll_analogy.png"
     width="83%"
     alt="Dask Collections"/></p>
<p><em>Image credit: Anaconda, Inc. and contributors</em></p>
</section>
</section>
<section id="dynamic-task-scheduling">
<h3>2. Dynamic Task Scheduling<a class="headerlink" href="#dynamic-task-scheduling" title="Permalink to this heading">#</a></h3>
<p><strong>We can basically think of the Dask scheduler as our task orchestrator.</strong></p>
<p>When a computation is submitted, work is segmented into discrete tasks which are assigned to workers by the Dask scheduler.</p>
<p>To perform work, a scheduler must be assigned resources in the form of a Dask cluster. The cluster consists of the following components:</p>
<ul class="simple">
<li><p><strong>scheduler</strong> : A scheduler creates and manages task graphs and distributes tasks to workers.</p></li>
<li><p><strong>workers</strong> : A worker is typically a separate Python process on either the local host or a remote machine. A Dask cluster usually consists of many workers. Basically, a worker is a Python interpretor which will perform work on a subset of our dataset.</p></li>
<li><p><strong>client</strong> - A high-level interface that points to the scheduler (often local but not always). A client serves as the entry point for interacting with a Dask scheduler.</p></li>
</ul>
<p><img src="https://tutorial.dask.org/_images/distributed-overview.png"
     width="75%"
     alt="Dask Distributed Cluster"/></p>
<p><em>Image credit: Anaconda, Inc. and contributors</em></p>
<p>We will learn more about Dask Collections and Dynamic Task Scheduling in the next tutorials.</p>
</section>
</section>
<section id="deploying-dask-cluster">
<h2>Deploying Dask Cluster<a class="headerlink" href="#deploying-dask-cluster" title="Permalink to this heading">#</a></h2>
<p>There are many different implementations of the Dask distributed cluster.</p>
<p><code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code>: Deploy Dask on job queuing systems like PBS, Slurm, MOAB, SGE, LSF, and HTCondor.</p>
<p><code class="docutils literal notranslate"><span class="pre">dask-kubernetes</span></code>: Deploy Dask workers on Kubernetes from within a Python script or interactive session.</p>
<p><code class="docutils literal notranslate"><span class="pre">dask-helm</span></code>: Deploy Dask and (optionally) Jupyter or JupyterHub on Kubernetes easily using Helm.</p>
<p><code class="docutils literal notranslate"><span class="pre">dask-cloudprovider</span></code>: Deploy Dask on various cloud platforms such as AWS, Azure, and GCP leveraging cloud native APIs.</p>
<p><code class="docutils literal notranslate"><span class="pre">dask-gateway</span></code>: Secure, multi-tenant server for managing Dask clusters. Launch and use Dask clusters in a shared, centrally managed cluster environment, without requiring users to have direct access to the underlying cluster backend.</p>
</section>
<section id="starting-hpc-dask-clusters-with-dask-jobqueue">
<h2>Starting HPC Dask clusters with <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code><a class="headerlink" href="#starting-hpc-dask-clusters-with-dask-jobqueue" title="Permalink to this heading">#</a></h2>
<p>A defining feature of most HPC systems is the batch scheduler - <em>Slurm, PBS, LSF, etc…</em> These schedulers allow us to access the significant resources of the system and scale far beyond what is capable by a personal workstation.</p>
<p>Using Dask on an HPC system is no different - we need to interact with the scheduler to provide Dask with ample compute resources. We <em>could</em> first start a job with multiple cores and a large amount of memory, and then use the <strong>LocalCluster</strong> to spawn workers. However, this approach only scales to a single node.</p>
<p>The typical approach is to let Dask request resources directly from the job scheduler via a scheduler-specific cluster type. Such clusters are provided by the add-on <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code> package.</p>
<section id="creating-a-scheduled-cluster">
<h3>Creating a scheduled-cluster<a class="headerlink" href="#creating-a-scheduled-cluster" title="Permalink to this heading">#</a></h3>
<p>Since we use the PBS Pro scheduler at NCAR, we will use the <strong>PBSCluster</strong> Dask scheduler from <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code>. Initialization is similar to a <strong>LocalCluster</strong>, but with unique parameters specific to creating batch jobs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dask</span>
<span class="kn">from</span> <span class="nn">dask_jobqueue</span> <span class="kn">import</span> <span class="n">PBSCluster</span>
<span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span>
</pre></div>
</div>
</div>
</div>
<p>The parameters of the <code class="docutils literal notranslate"><span class="pre">PBSCluster</span></code> provide a basic template for the resources that will be assigned to each job…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a PBS cluster object</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">PBSCluster</span><span class="p">(</span>
    <span class="n">job_name</span> <span class="o">=</span> <span class="s1">&#39;dask-wk23-hpc&#39;</span><span class="p">,</span>
    <span class="n">cores</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="s1">&#39;4GiB&#39;</span><span class="p">,</span>
    <span class="n">processes</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">local_directory</span> <span class="o">=</span> <span class="s1">&#39;/local_scratch/pbs.$PBS_JOBID/dask/spill&#39;</span><span class="p">,</span>
    <span class="n">resource_spec</span> <span class="o">=</span> <span class="s1">&#39;select=1:ncpus=1:mem=4GB&#39;</span><span class="p">,</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="s1">&#39;casper&#39;</span><span class="p">,</span>
    <span class="n">walltime</span> <span class="o">=</span> <span class="s1">&#39;30:00&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><em>Since we are working on a shared system, you may get a port-in-use warning. This is no cause for alarm, but make sure you are not starting a duplicate cluster unintentionally.</em></p>
<p>We should pause and consider some of these settings…</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">cores</span></code> and <code class="docutils literal notranslate"><span class="pre">memory</span></code> parameters are used by Dask to define workers, while the <code class="docutils literal notranslate"><span class="pre">resource_spec</span></code> is used by PBS to define jobs. In this single-worker config, they should match!</p></li>
<li><p>PBS uses <em>GB</em> to mean 1024-based storage units. <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code> accurately calls these <code class="docutils literal notranslate"><span class="pre">GiB</span></code>.</p></li>
<li><p>We use <code class="docutils literal notranslate"><span class="pre">interface='ib0'</span></code> to instruct Dask to use TCP over Infiniband (the high-speed network on Casper), instead of the slower ethernet network.</p></li>
</ul>
<p>Note also that we are using one worker per PBS job. This is a reasonable default on Casper, but it is possible to group workers together on one or more PBS jobs as well by increasing the <code class="docutils literal notranslate"><span class="pre">cores</span></code> and <code class="docutils literal notranslate"><span class="pre">ncpus</span></code>. Here are some considerations:</p>
<p><strong>Using less workers per job will:</strong></p>
<ul class="simple">
<li><p>Increase job throughput on most systems (easier to backfill smaller jobs)</p></li>
<li><p>Will always avoid interpretor lock issues</p></li>
<li><p>Is conceptually easy to understand</p></li>
<li><p>May be more robust if system is unstable</p></li>
<li><p>Can speed up file-reads in some situations</p></li>
</ul>
<p><strong>Using more workers per job will:</strong></p>
<ul class="simple">
<li><p>Less overhead in thread-friendly workflows</p></li>
<li><p>May allow for slightly higher memory thresholds since they will share a pool</p></li>
</ul>
<section id="it-is-good-practice-to-check-your-validate-your-cluster-before-initiating-any-workers-by-outputting-the-job-script-dask-will-create">
<h4>It is good practice to check your validate your cluster before initiating any workers, by outputting the job script Dask will create<a class="headerlink" href="#it-is-good-practice-to-check-your-validate-your-cluster-before-initiating-any-workers-by-outputting-the-job-script-dask-will-create" title="Permalink to this heading">#</a></h4>
<p>Position based indexing requires that we know the integer position of the data we want. For example, if we want to select the first element of the <code class="docutils literal notranslate"><span class="pre">lat</span></code> dimension, we can use the following syntax (0-based indexing similar to NumPy).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">cluster</span><span class="o">.</span><span class="n">job_script</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>#!/usr/bin/env bash

#PBS -N dask-wk23-hpc
#PBS -q casper
#PBS -A P08010000
#PBS -l select=1:ncpus=1:mem=4GB
#PBS -l walltime=30:00

/glade/u/apps/opt/conda/envs/npl-2024a/bin/python -m distributed.cli.dask_worker tcp://128.117.208.103:40473 --nthreads 1 --memory-limit 4.00GiB --name dummy-name --nanny --death-timeout 60 --local-directory /local_scratch/pbs.$PBS_JOBID/dask/spill
</pre></div>
</div>
</div>
</div>
<p><em>Note how some settings are showing up despite me not setting them… where does my account come from, for example?</em></p>
<p>Let’s take a detour for a moment…</p>
</section>
</section>
<section id="dask-configuration-files">
<h3>Dask configuration files<a class="headerlink" href="#dask-configuration-files" title="Permalink to this heading">#</a></h3>
<p>We can customize the behavior of Dask using YAML-based configuration files. These have some advantages:</p>
<ul class="simple">
<li><p>Eliminate user-specific configuration from your notebooks/scripts</p></li>
<li><p>Avoid repetition in defining clusters and other Dask objects</p></li>
<li><p>Potentially reduce errors from forgetting important settings</p></li>
</ul>
<p>And also some downsides:</p>
<ul class="simple">
<li><p>Obfuscates settings from others (including your future self!)</p></li>
<li><p>Reduces portability and ease of debugging</p></li>
</ul>
<p>User configuration files are stored in <code class="docutils literal notranslate"><span class="pre">~/.config/dask</span></code> by default. System administrators may also provide default Dask configuration in <code class="docutils literal notranslate"><span class="pre">/etc/dask</span></code> or via the <code class="docutils literal notranslate"><span class="pre">DASK_ROOT_CONFIG</span></code> environment variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls<span class="w"> </span>~/.config/dask
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dask.yaml         jobqueue.yaml      ncar-jobqueue.yaml
distributed.yaml  labextension.yaml
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Programmatically view configuration file(s) within Python</span>
<span class="kn">from</span> <span class="nn">dask</span> <span class="kn">import</span> <span class="n">config</span>
<span class="n">config</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;jobqueue.pbs&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;name&#39;: &#39;dask-worker&#39;,
 &#39;cores&#39;: None,
 &#39;memory&#39;: None,
 &#39;processes&#39;: None,
 &#39;interface&#39;: None,
 &#39;death-timeout&#39;: 60,
 &#39;local-directory&#39;: None,
 &#39;shared-temp-directory&#39;: None,
 &#39;extra&#39;: None,
 &#39;worker-extra-args&#39;: [],
 &#39;shebang&#39;: &#39;#!/usr/bin/env bash&#39;,
 &#39;queue&#39;: None,
 &#39;account&#39;: None,
 &#39;walltime&#39;: &#39;00:30:00&#39;,
 &#39;env-extra&#39;: None,
 &#39;job-script-prologue&#39;: [],
 &#39;resource-spec&#39;: None,
 &#39;job-extra&#39;: None,
 &#39;job-extra-directives&#39;: [],
 &#39;job-directives-skip&#39;: [],
 &#39;log-directory&#39;: None,
 &#39;scheduler-options&#39;: {}}
</pre></div>
</div>
</div>
</div>
</section>
<section id="live-performance-monitoring">
<h3>Live Performance Monitoring<a class="headerlink" href="#live-performance-monitoring" title="Permalink to this heading">#</a></h3>
<p>Using <code class="docutils literal notranslate"><span class="pre">dask.distributed</span></code> provides us with a powerful diagnostic tool you have already seen: the <em>Dashboard</em>. The Dashboard can be integrated into your Jupyter environment in two ways - either with a separate website accessible from the Client widget, or as tabs in your JupyterLab interface via the <code class="docutils literal notranslate"><span class="pre">dask-labextension</span></code> add-on.</p>
<p><strong>Tip:</strong> JupyterLab Dashboard tabs can be saved as a “workspace” and loaded back in future sessions.</p>
<p>Let’s see how both can be used to monitor Dask workers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the client to load the Dashboard</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the client repr</span>
<span class="n">client</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;"> </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px;">Client</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">Client-811904d4-b515-11ee-96b3-3cecef1b11fa</p>
        <table style="width: 100%; text-align: left;">

        <tr>
        
            <td style="text-align: left;"><strong>Connection method:</strong> Cluster object</td>
            <td style="text-align: left;"><strong>Cluster type:</strong> dask_jobqueue.PBSCluster</td>
        
        </tr>

        
            <tr>
                <td style="text-align: left;">
                    <strong>Dashboard: </strong> <a href="https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status" target="_blank">https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status</a>
                </td>
                <td style="text-align: left;"></td>
            </tr>
        

        </table>

        
            <button style="margin-bottom: 12px;" data-commandlinker-command="dask:populate-and-launch-layout" data-commandlinker-args='{"url": "https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status" }'>
                Launch dashboard in JupyterLab
            </button>
        

        
            <details>
            <summary style="margin-bottom: 20px;"><h3 style="display: inline;">Cluster Info</h3></summary>
            <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px; margin-top: 0px;">PBSCluster</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">1e5c5156</p>
        <table style="width: 100%; text-align: left;">
            <tr>
                <td style="text-align: left;">
                    <strong>Dashboard:</strong> <a href="https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status" target="_blank">https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status</a>
                </td>
                <td style="text-align: left;">
                    <strong>Workers:</strong> 0
                </td>
            </tr>
            <tr>
                <td style="text-align: left;">
                    <strong>Total threads:</strong> 0
                </td>
                <td style="text-align: left;">
                    <strong>Total memory:</strong> 0 B
                </td>
            </tr>
            
        </table>

        <details>
            <summary style="margin-bottom: 20px;">
                <h3 style="display: inline;">Scheduler Info</h3>
            </summary>

            <div style="">
    <div>
        <div style="width: 24px; height: 24px; background-color: #FFF7E5; border: 3px solid #FF6132; border-radius: 5px; position: absolute;"> </div>
        <div style="margin-left: 48px;">
            <h3 style="margin-bottom: 0px;">Scheduler</h3>
            <p style="color: #9D9D9D; margin-bottom: 0px;">Scheduler-bbdf142c-3acc-4c9a-99dd-445ab34f4a0e</p>
            <table style="width: 100%; text-align: left;">
                <tr>
                    <td style="text-align: left;">
                        <strong>Comm:</strong> tcp://128.117.208.103:40473
                    </td>
                    <td style="text-align: left;">
                        <strong>Workers:</strong> 0
                    </td>
                </tr>
                <tr>
                    <td style="text-align: left;">
                        <strong>Dashboard:</strong> <a href="https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status" target="_blank">https://jupyterhub.hpc.ucar.edu/stable/user/negins/proxy/8787/status</a>
                    </td>
                    <td style="text-align: left;">
                        <strong>Total threads:</strong> 0
                    </td>
                </tr>
                <tr>
                    <td style="text-align: left;">
                        <strong>Started:</strong> Just now
                    </td>
                    <td style="text-align: left;">
                        <strong>Total memory:</strong> 0 B
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <details style="margin-left: 48px;">
        <summary style="margin-bottom: 20px;">
            <h3 style="display: inline;">Workers</h3>
        </summary>

        

    </details>
</div>

        </details>
    </div>
</div>
            </details>
        

    </div>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale the cluster to 2 workers (which will use 2 jobs here)</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Block progress until workers have spawned (typically only in demos and benchmarks!)</span>
<span class="n">client</span><span class="o">.</span><span class="n">wait_for_workers</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># See the workers from the cluster object</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">workers</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;PBSCluster-0&#39;: &lt;dask_jobqueue.pbs.PBSJob: status=running&gt;,
 &#39;PBSCluster-1&#39;: &lt;dask_jobqueue.pbs.PBSJob: status=running&gt;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># See the workers in the job scheduler</span>
<span class="o">!</span>qstat<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                                                            Req&#39;d  Req&#39;d   Elap
Job ID          Username Queue    Jobname    SessID NDS TSK Memory Time  S Time
--------------- -------- -------- ---------- ------ --- --- ------ ----- - -----
9368874.casper* negins   htc      STDIN       10374   1   1   16gb 24:00 R 02:02
</pre></div>
</div>
</div>
</div>
<p><em>As soon as we scale the cluster up, the clock is ticking on these PBS jobs. Be mindful of idle workers when using a batch scheduler!</em> 💪 🎉</p>
</section>
</section>
<section id="reading-multiple-netcdf-files-with-open-mfdataset">
<h2>Reading Multiple NetCdf Files with <code class="docutils literal notranslate"><span class="pre">open_mfdataset</span></code><a class="headerlink" href="#reading-multiple-netcdf-files-with-open-mfdataset" title="Permalink to this heading">#</a></h2>
<p>Xarray provides a function called <code class="docutils literal notranslate"><span class="pre">open_dataset</span></code> function that allows us to load a netCDF dataset into a Python data structure. To read more about this function, please see <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.open_dataset.html">xarray <code class="docutils literal notranslate"><span class="pre">open_dataset</span></code> API documentation</a>.</p>
<p>Xarray also provides <code class="docutils literal notranslate"><span class="pre">open_mfdataset</span></code>, which open multiple files as a single xarray dataset. Passing the argument <code class="docutils literal notranslate"><span class="pre">parallel=True</span></code> will speed up reading multiple datasets by executing these tasks in parallel using Dask Delayed under the hood.</p>
<p>In the previous notebook, we only opened and analyzed one file from CESM LENS2 dataset. In this example, let’s open all files from that ensemble member.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>

<span class="n">var</span> <span class="o">=</span> <span class="s1">&#39;TREFHT&#39;</span>

<span class="c1"># find all LENS files for 1 ensemble</span>
<span class="n">data_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/glade/campaign/cgd/cesm/CESM2-LE/timeseries/atm/proc/tseries/month_1/&#39;</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
<span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_dir</span><span class="p">,</span> <span class="s1">&#39;b.e21.BSSP370smbb.f09_g17.LE2-1301.013*.nc&#39;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All files: [&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="s2">&quot;files]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>All files: [ 9 files]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="n">xr</span><span class="o">.</span><span class="n">set_options</span><span class="p">(</span><span class="n">display_expand_attrs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">display_expand_data</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_mfdataset</span><span class="p">(</span>
    <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">),</span>
    <span class="c1"># concatenate along this dimension</span>
    <span class="n">concat_dim</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
    <span class="c1"># concatenate files in the order provided</span>
    <span class="n">combine</span><span class="o">=</span><span class="s2">&quot;nested&quot;</span><span class="p">,</span>
    <span class="c1"># parallelize the reading of individual files using dask</span>
    <span class="c1"># This means the returned arrays will be dask arrays</span>
    <span class="n">parallel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="c1"># these are netCDF4 files, use the h5netcdf package to read them</span>
    <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;h5netcdf&quot;</span><span class="p">,</span>
    <span class="c1"># hold off on decoding time</span>
    <span class="n">decode_cf</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="c1"># specify that data should be automatically chunked</span>
    <span class="n">chunks</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">decode_cf</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 337 ms, sys: 21.2 ms, total: 358 ms
Wall time: 1.29 s
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:       (lat: 192, zlon: 1, time: 1032, nbnd: 2, lon: 288, lev: 32,
                   ilev: 33)
Coordinates:
  * lat           (lat) float64 -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0
  * zlon          (zlon) float64 0.0
  * lon           (lon) float64 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8
  * lev           (lev) float64 3.643 7.595 14.36 24.61 ... 957.5 976.3 992.6
  * ilev          (ilev) float64 2.255 5.032 10.16 18.56 ... 967.5 985.1 1e+03
  * time          (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00
Dimensions without coordinates: nbnd
Data variables: (12/27)
    zlon_bnds     (time, zlon, nbnd) float64 dask.array&lt;chunksize=(120, 1, 2), meta=np.ndarray&gt;
    gw            (time, lat) float64 dask.array&lt;chunksize=(120, 192), meta=np.ndarray&gt;
    hyam          (time, lev) float64 dask.array&lt;chunksize=(120, 32), meta=np.ndarray&gt;
    hybm          (time, lev) float64 dask.array&lt;chunksize=(120, 32), meta=np.ndarray&gt;
    P0            (time) float64 ...
    hyai          (time, ilev) float64 dask.array&lt;chunksize=(120, 33), meta=np.ndarray&gt;
    ...            ...
    n2ovmr        (time) float64 dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;
    f11vmr        (time) float64 dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;
    f12vmr        (time) float64 dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;
    sol_tsi       (time) float64 dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;
    nsteph        (time) int32 dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;
    TREFHT        (time, lat, lon) float32 dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;
Attributes: (9)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-c9668458-2720-48f5-8332-769e5af24ec6' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c9668458-2720-48f5-8332-769e5af24ec6' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>zlon</span>: 1</li><li><span class='xr-has-index'>time</span>: 1032</li><li><span>nbnd</span>: 2</li><li><span class='xr-has-index'>lon</span>: 288</li><li><span class='xr-has-index'>lev</span>: 32</li><li><span class='xr-has-index'>ilev</span>: 33</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-77829f00-aa43-42b6-ac1f-6e1a14496584' class='xr-section-summary-in' type='checkbox'  checked><label for='section-77829f00-aa43-42b6-ac1f-6e1a14496584' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-d0deb9dd-6837-4a79-b303-ea26be2b2bb7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d0deb9dd-6837-4a79-b303-ea26be2b2bb7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1d62135f-dee7-4d06-9cc2-12341b3f92f6' class='xr-var-data-in' type='checkbox'><label for='data-1d62135f-dee7-4d06-9cc2-12341b3f92f6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>zlon</span></div><div class='xr-var-dims'>(zlon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-e2b680d7-b4e5-40d7-946d-cb5cc50f340c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e2b680d7-b4e5-40d7-946d-cb5cc50f340c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e3dbef30-f0fd-4b75-960c-a5fccb085877' class='xr-var-data-in' type='checkbox'><label for='data-e3dbef30-f0fd-4b75-960c-a5fccb085877' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>bounds :</span></dt><dd>zlon_bnds</dd></dl></div><div class='xr-var-data'><pre>array([0.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-3858a753-599e-4cb1-978d-3bd480e8f45d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3858a753-599e-4cb1-978d-3bd480e8f45d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d332559f-743b-431e-816f-741675057368' class='xr-var-data-in' type='checkbox'><label for='data-d332559f-743b-431e-816f-741675057368' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lev</span></div><div class='xr-var-dims'>(lev)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.643 7.595 14.36 ... 976.3 992.6</div><input id='attrs-2fff668c-b93e-429a-99d6-17895938536d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2fff668c-b93e-429a-99d6-17895938536d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef8a708d-05e4-4e45-9cde-96dd495e3944' class='xr-var-data-in' type='checkbox'><label for='data-ef8a708d-05e4-4e45-9cde-96dd495e3944' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>hybrid level at midpoints (1000*(A+B))</dd><dt><span>units :</span></dt><dd>hPa</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>standard_name :</span></dt><dd>atmosphere_hybrid_sigma_pressure_coordinate</dd><dt><span>formula_terms :</span></dt><dd>a: hyam b: hybm p0: P0 ps: PS</dd></dl></div><div class='xr-var-data'><pre>array([  3.643466,   7.59482 ,  14.356632,  24.61222 ,  35.92325 ,  43.19375 ,
        51.677499,  61.520498,  73.750958,  87.82123 , 103.317127, 121.547241,
       142.994039, 168.22508 , 197.908087, 232.828619, 273.910817, 322.241902,
       379.100904, 445.992574, 524.687175, 609.778695, 691.38943 , 763.404481,
       820.858369, 859.534767, 887.020249, 912.644547, 936.198398, 957.48548 ,
       976.325407, 992.556095])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>ilev</span></div><div class='xr-var-dims'>(ilev)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>2.255 5.032 10.16 ... 985.1 1e+03</div><input id='attrs-4657d374-aa25-4fb1-a95e-00cdb5dfc731' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4657d374-aa25-4fb1-a95e-00cdb5dfc731' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-801e287c-565b-49ac-8adf-2b96cfb0b813' class='xr-var-data-in' type='checkbox'><label for='data-801e287c-565b-49ac-8adf-2b96cfb0b813' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>hybrid level at interfaces (1000*(A+B))</dd><dt><span>units :</span></dt><dd>hPa</dd><dt><span>positive :</span></dt><dd>down</dd><dt><span>standard_name :</span></dt><dd>atmosphere_hybrid_sigma_pressure_coordinate</dd><dt><span>formula_terms :</span></dt><dd>a: hyai b: hybi p0: P0 ps: PS</dd></dl></div><div class='xr-var-data'><pre>array([   2.25524 ,    5.031692,   10.157947,   18.555317,   29.734676,
         39.273001,   47.114499,   56.240499,   66.800497,   80.701418,
         94.941042,  111.693211,  131.401271,  154.586807,  181.863353,
        213.952821,  251.704417,  296.117216,  348.366588,  409.835219,
        482.149929,  567.224421,  652.332969,  730.445892,  796.363071,
        845.353667,  873.715866,  900.324631,  924.964462,  947.432335,
        967.538625,  985.11219 , 1000.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-cdcd7f24-fe40-47f1-ad68-784b7557486e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cdcd7f24-fe40-47f1-ad68-784b7557486e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3faae4a3-654a-4afd-af74-3fe720e25587' class='xr-var-data-in' type='checkbox'><label for='data-3faae4a3-654a-4afd-af74-3fe720e25587' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-19a1f42f-2293-423f-8c22-9b5ecda092f4' class='xr-section-summary-in' type='checkbox'  ><label for='section-19a1f42f-2293-423f-8c22-9b5ecda092f4' class='xr-section-summary' >Data variables: <span>(27)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>zlon_bnds</span></div><div class='xr-var-dims'>(time, zlon, nbnd)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 1, 2), meta=np.ndarray&gt;</div><input id='attrs-a4cba19b-cad0-49a5-9a14-aecd3df76865' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a4cba19b-cad0-49a5-9a14-aecd3df76865' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a3851e34-461f-4156-ab57-2890a2ce90f8' class='xr-var-data-in' type='checkbox'><label for='data-a3851e34-461f-4156-ab57-2890a2ce90f8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>zlon bounds</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 16.12 kiB </td>
                        <td> 1.88 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 1, 2) </td>
                        <td> (120, 1, 2) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 28 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="156" height="146" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="25" x2="80" y2="96" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="25" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="33" />
  <line x1="26" y1="16" x2="26" y2="41" />
  <line x1="34" y1="24" x2="34" y2="50" />
  <line x1="42" y1="32" x2="42" y2="58" />
  <line x1="51" y1="41" x2="51" y2="66" />
  <line x1="59" y1="49" x2="59" y2="74" />
  <line x1="67" y1="57" x2="67" y2="82" />
  <line x1="75" y1="65" x2="75" y2="91" />
  <line x1="80" y1="70" x2="80" y2="96" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,96.00085180870013 10.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="35" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="43" y2="8" />
  <line x1="26" y1="16" x2="51" y2="16" />
  <line x1="34" y1="24" x2="60" y2="24" />
  <line x1="42" y1="32" x2="68" y2="32" />
  <line x1="51" y1="41" x2="76" y2="41" />
  <line x1="59" y1="49" x2="84" y2="49" />
  <line x1="67" y1="57" x2="92" y2="57" />
  <line x1="75" y1="65" x2="101" y2="65" />
  <line x1="80" y1="70" x2="106" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="35" y1="0" x2="106" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 35.41261651458248,0.0 106.00085180870013,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="106" y2="70" style="stroke-width:2" />
  <line x1="80" y1="96" x2="106" y2="96" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="96" style="stroke-width:2" />
  <line x1="106" y1="70" x2="106" y2="96" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 106.00085180870013,70.58823529411765 106.00085180870013,96.00085180870013 80.58823529411765,96.00085180870013" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="93.294544" y="116.000852" font-size="1.0rem" font-weight="100" text-anchor="middle" >2</text>
  <text x="126.000852" y="83.294544" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,126.000852,83.294544)">1</text>
  <text x="35.294118" y="80.706734" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,80.706734)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>gw</span></div><div class='xr-var-dims'>(time, lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 192), meta=np.ndarray&gt;</div><input id='attrs-201d1603-4a31-463b-9584-768335a77882' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-201d1603-4a31-463b-9584-768335a77882' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-78ca1089-1042-4711-a68a-d2d7359033ed' class='xr-var-data-in' type='checkbox'><label for='data-78ca1089-1042-4711-a68a-d2d7359033ed' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude weights</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 1.51 MiB </td>
                        <td> 180.00 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192) </td>
                        <td> (120, 192) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 29 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="91" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="41" y2="0" style="stroke-width:2" />
  <line x1="0" y1="13" x2="41" y2="13" />
  <line x1="0" y1="27" x2="41" y2="27" />
  <line x1="0" y1="41" x2="41" y2="41" />
  <line x1="0" y1="55" x2="41" y2="55" />
  <line x1="0" y1="69" x2="41" y2="69" />
  <line x1="0" y1="83" x2="41" y2="83" />
  <line x1="0" y1="97" x2="41" y2="97" />
  <line x1="0" y1="111" x2="41" y2="111" />
  <line x1="0" y1="120" x2="41" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="41" y1="0" x2="41" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 41.69862148310268,0.0 41.69862148310268,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="20.849311" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >192</text>
  <text x="61.698621" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,61.698621,60.000000)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>hyam</span></div><div class='xr-var-dims'>(time, lev)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 32), meta=np.ndarray&gt;</div><input id='attrs-6d450057-6805-4a10-a7f3-51421323e254' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6d450057-6805-4a10-a7f3-51421323e254' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2f23c790-8601-48a7-a70c-a163bff87d95' class='xr-var-data-in' type='checkbox'><label for='data-2f23c790-8601-48a7-a70c-a163bff87d95' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>hybrid A coefficient at layer midpoints</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 258.00 kiB </td>
                        <td> 30.00 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 32) </td>
                        <td> (120, 32) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 28 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="81" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="13" x2="31" y2="13" />
  <line x1="0" y1="27" x2="31" y2="27" />
  <line x1="0" y1="41" x2="31" y2="41" />
  <line x1="0" y1="55" x2="31" y2="55" />
  <line x1="0" y1="69" x2="31" y2="69" />
  <line x1="0" y1="83" x2="31" y2="83" />
  <line x1="0" y1="97" x2="31" y2="97" />
  <line x1="0" y1="111" x2="31" y2="111" />
  <line x1="0" y1="120" x2="31" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="31" y1="0" x2="31" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.58847123162717,0.0 31.58847123162717,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.794236" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >32</text>
  <text x="51.588471" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,51.588471,60.000000)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>hybm</span></div><div class='xr-var-dims'>(time, lev)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 32), meta=np.ndarray&gt;</div><input id='attrs-b9b19bb9-ca11-44c6-976a-ed91ac500dbb' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b9b19bb9-ca11-44c6-976a-ed91ac500dbb' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-457d05c9-02b5-4a82-88a5-4c5e6da0833c' class='xr-var-data-in' type='checkbox'><label for='data-457d05c9-02b5-4a82-88a5-4c5e6da0833c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>hybrid B coefficient at layer midpoints</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 258.00 kiB </td>
                        <td> 30.00 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 32) </td>
                        <td> (120, 32) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 28 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="81" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="13" x2="31" y2="13" />
  <line x1="0" y1="27" x2="31" y2="27" />
  <line x1="0" y1="41" x2="31" y2="41" />
  <line x1="0" y1="55" x2="31" y2="55" />
  <line x1="0" y1="69" x2="31" y2="69" />
  <line x1="0" y1="83" x2="31" y2="83" />
  <line x1="0" y1="97" x2="31" y2="97" />
  <line x1="0" y1="111" x2="31" y2="111" />
  <line x1="0" y1="120" x2="31" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="31" y1="0" x2="31" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.58847123162717,0.0 31.58847123162717,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.794236" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >32</text>
  <text x="51.588471" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,51.588471,60.000000)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>P0</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-39fc4f32-91c8-497a-ade7-1ac6d8a02b38' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-39fc4f32-91c8-497a-ade7-1ac6d8a02b38' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6c1667fa-a73c-47ee-9f2f-644053050f6e' class='xr-var-data-in' type='checkbox'><label for='data-6c1667fa-a73c-47ee-9f2f-644053050f6e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>reference pressure</dd><dt><span>units :</span></dt><dd>Pa</dd></dl></div><div class='xr-var-data'><pre>[1032 values with dtype=float64]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>hyai</span></div><div class='xr-var-dims'>(time, ilev)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 33), meta=np.ndarray&gt;</div><input id='attrs-9445c2e7-188c-48f3-85c2-c9c3ce294cad' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9445c2e7-188c-48f3-85c2-c9c3ce294cad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-284bc0f8-69aa-4614-87e8-c9f24d77b1b2' class='xr-var-data-in' type='checkbox'><label for='data-284bc0f8-69aa-4614-87e8-c9f24d77b1b2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>hybrid A coefficient at layer interfaces</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 266.06 kiB </td>
                        <td> 30.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 33) </td>
                        <td> (120, 33) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 28 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="81" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="13" x2="31" y2="13" />
  <line x1="0" y1="27" x2="31" y2="27" />
  <line x1="0" y1="41" x2="31" y2="41" />
  <line x1="0" y1="55" x2="31" y2="55" />
  <line x1="0" y1="69" x2="31" y2="69" />
  <line x1="0" y1="83" x2="31" y2="83" />
  <line x1="0" y1="97" x2="31" y2="97" />
  <line x1="0" y1="111" x2="31" y2="111" />
  <line x1="0" y1="120" x2="31" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="31" y1="0" x2="31" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.773570375176213,0.0 31.773570375176213,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.886785" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >33</text>
  <text x="51.773570" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,51.773570,60.000000)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>hybi</span></div><div class='xr-var-dims'>(time, ilev)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 33), meta=np.ndarray&gt;</div><input id='attrs-eaf3402b-d7b0-48cd-bd09-9baa41990da9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-eaf3402b-d7b0-48cd-bd09-9baa41990da9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3b47581a-dc34-40e4-a23f-28d130231d47' class='xr-var-data-in' type='checkbox'><label for='data-3b47581a-dc34-40e4-a23f-28d130231d47' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>hybrid B coefficient at layer interfaces</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 266.06 kiB </td>
                        <td> 30.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 33) </td>
                        <td> (120, 33) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 28 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="81" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="31" y2="0" style="stroke-width:2" />
  <line x1="0" y1="13" x2="31" y2="13" />
  <line x1="0" y1="27" x2="31" y2="27" />
  <line x1="0" y1="41" x2="31" y2="41" />
  <line x1="0" y1="55" x2="31" y2="55" />
  <line x1="0" y1="69" x2="31" y2="69" />
  <line x1="0" y1="83" x2="31" y2="83" />
  <line x1="0" y1="97" x2="31" y2="97" />
  <line x1="0" y1="111" x2="31" y2="111" />
  <line x1="0" y1="120" x2="31" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="31" y1="0" x2="31" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 31.773570375176213,0.0 31.773570375176213,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="15.886785" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >33</text>
  <text x="51.773570" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,51.773570,60.000000)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ndbase</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-3d1b0646-e22e-4905-9c3d-61ae21fd1d04' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3d1b0646-e22e-4905-9c3d-61ae21fd1d04' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6107d356-123f-408b-bee5-91ace77c2c40' class='xr-var-data-in' type='checkbox'><label for='data-6107d356-123f-408b-bee5-91ace77c2c40' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>base day</dd></dl></div><div class='xr-var-data'><pre>[1032 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nsbase</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-7ed314a5-8eac-4938-8b53-ed109b0e2cbd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7ed314a5-8eac-4938-8b53-ed109b0e2cbd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fe2aa801-f15b-4a86-8d6b-90ff85967202' class='xr-var-data-in' type='checkbox'><label for='data-fe2aa801-f15b-4a86-8d6b-90ff85967202' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>seconds of base day</dd></dl></div><div class='xr-var-data'><pre>[1032 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nbdate</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6d6d3ae9-65e0-43d2-8120-3ed2ffb6e3df' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6d6d3ae9-65e0-43d2-8120-3ed2ffb6e3df' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d2df1422-4240-4630-92d2-c699e0817e1e' class='xr-var-data-in' type='checkbox'><label for='data-d2df1422-4240-4630-92d2-c699e0817e1e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>base date (YYYYMMDD)</dd></dl></div><div class='xr-var-data'><pre>[1032 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nbsec</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-dfebd928-413d-43ca-86b3-4904ddaadb35' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dfebd928-413d-43ca-86b3-4904ddaadb35' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bc85b2c1-8294-447a-802c-72e4cc957f3d' class='xr-var-data-in' type='checkbox'><label for='data-bc85b2c1-8294-447a-802c-72e4cc957f3d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>seconds of base date</dd></dl></div><div class='xr-var-data'><pre>[1032 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>mdt</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-64300a6e-695a-42fa-98dc-7e867c72ac77' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-64300a6e-695a-42fa-98dc-7e867c72ac77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9419250d-0bbb-4803-a7d7-9737f1a388ab' class='xr-var-data-in' type='checkbox'><label for='data-9419250d-0bbb-4803-a7d7-9737f1a388ab' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>timestep</dd><dt><span>units :</span></dt><dd>s</dd></dl></div><div class='xr-var-data'><pre>[1032 values with dtype=int32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>date</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-e5fb2477-9543-425f-a629-a94438ff9c32' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e5fb2477-9543-425f-a629-a94438ff9c32' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8a0ff308-f6e0-4e81-8dd3-306f5744e36e' class='xr-var-data-in' type='checkbox'><label for='data-8a0ff308-f6e0-4e81-8dd3-306f5744e36e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>current date (YYYYMMDD)</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 4.03 kiB </td>
                        <td> 480 B </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> int32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>datesec</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-a5b554f0-a8f8-4d22-a72c-8c87dd803921' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a5b554f0-a8f8-4d22-a72c-8c87dd803921' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-450efffd-9de5-4b73-8e3d-b15cb9029442' class='xr-var-data-in' type='checkbox'><label for='data-450efffd-9de5-4b73-8e3d-b15cb9029442' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>current seconds of current date</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 4.03 kiB </td>
                        <td> 480 B </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> int32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time_bnds</span></div><div class='xr-var-dims'>(time, nbnd)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 2), meta=np.ndarray&gt;</div><input id='attrs-63b3b800-5f52-401e-b353-523a783010a5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-63b3b800-5f52-401e-b353-523a783010a5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3b51d92a-e2fb-4bf0-8282-84345e896a92' class='xr-var-data-in' type='checkbox'><label for='data-3b51d92a-e2fb-4bf0-8282-84345e896a92' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time interval endpoints</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 16.12 kiB </td>
                        <td> 1.88 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 2) </td>
                        <td> (120, 2) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 20 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> object numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="75" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="25" y2="0" style="stroke-width:2" />
  <line x1="0" y1="13" x2="25" y2="13" />
  <line x1="0" y1="27" x2="25" y2="27" />
  <line x1="0" y1="41" x2="25" y2="41" />
  <line x1="0" y1="55" x2="25" y2="55" />
  <line x1="0" y1="69" x2="25" y2="69" />
  <line x1="0" y1="83" x2="25" y2="83" />
  <line x1="0" y1="97" x2="25" y2="97" />
  <line x1="0" y1="111" x2="25" y2="111" />
  <line x1="0" y1="120" x2="25" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="25" y1="0" x2="25" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 25.412616514582485,0.0 25.412616514582485,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="12.706308" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >2</text>
  <text x="45.412617" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,45.412617,60.000000)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>date_written</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>|S8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-f99bd0c7-076b-49d0-ae4d-9b0eab41fd97' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f99bd0c7-076b-49d0-ae4d-9b0eab41fd97' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d93d0fa8-317d-492e-85c9-97a094a5a062' class='xr-var-data-in' type='checkbox'><label for='data-d93d0fa8-317d-492e-85c9-97a094a5a062' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 20 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> |S8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>time_written</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>|S8</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-243a0e0e-bb26-4dfe-86ae-bc224815d359' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-243a0e0e-bb26-4dfe-86ae-bc224815d359' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-35733c40-0e9c-480f-8286-91dd47b44794' class='xr-var-data-in' type='checkbox'><label for='data-35733c40-0e9c-480f-8286-91dd47b44794' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 20 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> |S8 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ndcur</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-07c59357-02b8-4edd-a43d-59e89fb0e530' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-07c59357-02b8-4edd-a43d-59e89fb0e530' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7f126761-eb82-408c-a3fc-6e2c8e3a35de' class='xr-var-data-in' type='checkbox'><label for='data-7f126761-eb82-408c-a3fc-6e2c8e3a35de' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>current day (from base day)</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 4.03 kiB </td>
                        <td> 480 B </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> int32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nscur</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-5f8436e2-f352-4122-85d0-44146e318a60' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5f8436e2-f352-4122-85d0-44146e318a60' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-199df42b-373f-4930-bb65-4bd8bedff529' class='xr-var-data-in' type='checkbox'><label for='data-199df42b-373f-4930-bb65-4bd8bedff529' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>current seconds of current day</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 4.03 kiB </td>
                        <td> 480 B </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> int32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>co2vmr</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-a45213ba-9a87-48ef-901e-68ea8c9e050f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a45213ba-9a87-48ef-901e-68ea8c9e050f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-534cbc1e-655d-47bd-8de9-0aca1e48783c' class='xr-var-data-in' type='checkbox'><label for='data-534cbc1e-655d-47bd-8de9-0aca1e48783c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>co2 volume mixing ratio</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ch4vmr</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-bc4a8007-8a70-4f60-b8fe-0351c290ae2d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bc4a8007-8a70-4f60-b8fe-0351c290ae2d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-172df600-6146-4b6b-8d69-39da1e667eba' class='xr-var-data-in' type='checkbox'><label for='data-172df600-6146-4b6b-8d69-39da1e667eba' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>ch4 volume mixing ratio</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>n2ovmr</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-35a91a8a-e28d-4af5-be1b-38fded424e6b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-35a91a8a-e28d-4af5-be1b-38fded424e6b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b5294267-e40a-4c11-90cc-be923eb5302e' class='xr-var-data-in' type='checkbox'><label for='data-b5294267-e40a-4c11-90cc-be923eb5302e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>n2o volume mixing ratio</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>f11vmr</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-db74db17-742c-4e10-a3a9-5ce9aaf0a11e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-db74db17-742c-4e10-a3a9-5ce9aaf0a11e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e1f14770-acbf-4a8d-ab8f-ec096da6e951' class='xr-var-data-in' type='checkbox'><label for='data-e1f14770-acbf-4a8d-ab8f-ec096da6e951' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>f11 volume mixing ratio</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>f12vmr</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-0fe37b81-4e46-4d6f-b01f-83d7fdcd9b87' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0fe37b81-4e46-4d6f-b01f-83d7fdcd9b87' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cfba963a-311f-437a-b1a1-ed3ef7ecd57c' class='xr-var-data-in' type='checkbox'><label for='data-cfba963a-311f-437a-b1a1-ed3ef7ecd57c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>f12 volume mixing ratio</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sol_tsi</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-66f139d8-8e32-409c-9e08-da704f521419' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-66f139d8-8e32-409c-9e08-da704f521419' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d586303a-7611-42c6-80af-63375c518016' class='xr-var-data-in' type='checkbox'><label for='data-d586303a-7611-42c6-80af-63375c518016' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>total solar irradiance</dd><dt><span>units :</span></dt><dd>W/m2</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 8.06 kiB </td>
                        <td> 0.94 kiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>nsteph</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120,), meta=np.ndarray&gt;</div><input id='attrs-62793a70-437a-4919-bf4f-97b7581c9f9c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-62793a70-437a-4919-bf4f-97b7581c9f9c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dffd096e-2d8d-4a14-94f7-681c1c8f7a0b' class='xr-var-data-in' type='checkbox'><label for='data-dffd096e-2d8d-4a14-94f7-681c1c8f7a0b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>current timestep</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 4.03 kiB </td>
                        <td> 480 B </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (120,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> int32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="13" y1="0" x2="13" y2="25" />
  <line x1="27" y1="0" x2="27" y2="25" />
  <line x1="41" y1="0" x2="41" y2="25" />
  <line x1="55" y1="0" x2="55" y2="25" />
  <line x1="69" y1="0" x2="69" y2="25" />
  <line x1="83" y1="0" x2="83" y2="25" />
  <line x1="97" y1="0" x2="97" y2="25" />
  <line x1="111" y1="0" x2="111" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>TREFHT</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;</div><input id='attrs-833f7843-41cb-49fd-a10f-225f04302489' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-833f7843-41cb-49fd-a10f-225f04302489' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-043bf1f1-a4c3-4e09-91e5-6d7df0e1f06b' class='xr-var-data-in' type='checkbox'><label for='data-043bf1f1-a4c3-4e09-91e5-6d7df0e1f06b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>Reference height temperature</dd><dt><span>cell_methods :</span></dt><dd>time: mean</dd></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 217.69 MiB </td>
                        <td> 25.31 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192, 288) </td>
                        <td> (120, 192, 288) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="41" x2="80" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="41" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="49" />
  <line x1="26" y1="16" x2="26" y2="58" />
  <line x1="34" y1="24" x2="34" y2="66" />
  <line x1="42" y1="32" x2="42" y2="74" />
  <line x1="51" y1="41" x2="51" y2="82" />
  <line x1="59" y1="49" x2="59" y2="90" />
  <line x1="67" y1="57" x2="67" y2="99" />
  <line x1="75" y1="65" x2="75" y2="107" />
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,112.28685677722032 10.0,41.69862148310268" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="53" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="61" y2="8" />
  <line x1="26" y1="16" x2="69" y2="16" />
  <line x1="34" y1="24" x2="77" y2="24" />
  <line x1="42" y1="32" x2="86" y2="32" />
  <line x1="51" y1="41" x2="94" y2="41" />
  <line x1="59" y1="49" x2="102" y2="49" />
  <line x1="67" y1="57" x2="110" y2="57" />
  <line x1="75" y1="65" x2="118" y2="65" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="53" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 53.29712651467347,0.0 123.88536180879112,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="112" x2="123" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />
  <line x1="123" y1="70" x2="123" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.88536180879112,70.58823529411765 123.88536180879112,112.28685677722032 80.58823529411765,112.28685677722032" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="102.236799" y="132.286857" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="143.885362" y="91.437546" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.885362,91.437546)">192</text>
  <text x="35.294118" y="96.992739" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,96.992739)">1032</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-74bcfde4-7ecb-4932-b569-1a1ec11da062' class='xr-section-summary-in' type='checkbox'  ><label for='section-74bcfde4-7ecb-4932-b569-1a1ec11da062' class='xr-section-summary' >Indexes: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f3cbec02-7da4-4c0e-97c3-da0ac06d7eb8' class='xr-index-data-in' type='checkbox'/><label for='index-f3cbec02-7da4-4c0e-97c3-da0ac06d7eb8' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([             -90.0, -89.05759162303664,  -88.1151832460733,
       -87.17277486910994,  -86.2303664921466, -85.28795811518324,
        -84.3455497382199, -83.40314136125654, -82.46073298429319,
       -81.51832460732984,
       ...
        81.51832460732984,  82.46073298429319,  83.40314136125654,
         84.3455497382199,  85.28795811518324,   86.2303664921466,
        87.17277486910994,   88.1151832460733,  89.05759162303664,
                     90.0],
      dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;, length=192))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>zlon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-14a510b3-01e5-46d1-8705-c69e5de4f7b7' class='xr-index-data-in' type='checkbox'/><label for='index-14a510b3-01e5-46d1-8705-c69e5de4f7b7' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0.0], dtype=&#x27;float64&#x27;, name=&#x27;zlon&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-c387d381-cccd-4f8c-9b59-2e4491e06ba4' class='xr-index-data-in' type='checkbox'/><label for='index-c387d381-cccd-4f8c-9b59-2e4491e06ba4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   1.25,    2.5,   3.75,    5.0,   6.25,    7.5,   8.75,   10.0,
        11.25,
       ...
        347.5, 348.75,  350.0, 351.25,  352.5, 353.75,  355.0, 356.25,  357.5,
       358.75],
      dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;, length=288))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lev</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-414193bf-f3b9-40b5-bc68-5f6cd23e2420' class='xr-index-data-in' type='checkbox'/><label for='index-414193bf-f3b9-40b5-bc68-5f6cd23e2420' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([  3.64346569404006,  7.594819646328688, 14.356632251292467,
       24.612220004200935,  35.92325001955032,   43.1937500834465,
        51.67749896645546,  61.52049824595451,  73.75095784664154,
        87.82123029232025, 103.31712663173676, 121.54724076390266,
       142.99403876066208, 168.22507977485657,  197.9080867022276,
       232.82861895859241,  273.9108167588711,  322.2419023513794,
       379.10090386867523,   445.992574095726,  524.6871747076511,
        609.7786948084831,  691.3894303143024,   763.404481112957,
        820.8583686500788,  859.5347665250301,  887.0202489197254,
         912.644546944648,  936.1983984708786,   957.485479535535,
         976.325407391414,   992.556095123291],
      dtype=&#x27;float64&#x27;, name=&#x27;lev&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>ilev</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-39358db2-398b-422d-935d-9d71a3233afc' class='xr-index-data-in' type='checkbox'/><label for='index-39358db2-398b-422d-935d-9d71a3233afc' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([ 2.255239523947239,  5.031691864132881,  10.15794742852449,
        18.55531707406044,  29.73467559512106,  39.27300125360489,
        47.11449891328812,   56.2404990196228,  66.80049747228622,
        80.70141822099686,  94.94104236364365, 111.69321089982986,
       131.40127062797546,  154.5868068933487, 181.86335265636444,
       213.95282074809074, 251.70441716909409, 296.11721634864807,
        348.3665883541107, 409.83521938323975,  482.1499288082123,
          567.22442060709,  652.3329690098763,  730.4458916187286,
        796.3630706071854,  845.3536666929722,  873.7158663570881,
        900.3246314823627,  924.9644624069333,  947.4323345348239,
        967.5386245362461,   985.112190246582,             1000.0],
      dtype=&#x27;float64&#x27;, name=&#x27;ilev&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-545aa4db-d2a5-4e6d-bdfe-9923831041ed' class='xr-index-data-in' type='checkbox'/><label for='index-545aa4db-d2a5-4e6d-bdfe-9923831041ed' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8e373663-7d1d-4506-9824-a53d1fa991ad' class='xr-section-summary-in' type='checkbox'  ><label for='section-8e373663-7d1d-4506-9824-a53d1fa991ad' class='xr-section-summary' >Attributes: <span>(9)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>Conventions :</span></dt><dd>CF-1.0</dd><dt><span>source :</span></dt><dd>CAM</dd><dt><span>case :</span></dt><dd>b.e21.BSSP370smbb.f09_g17.LE2-1301.013</dd><dt><span>logname :</span></dt><dd>sunseon</dd><dt><span>host :</span></dt><dd>mom1</dd><dt><span>initial_file :</span></dt><dd>b.e21.BHISTsmbb.f09_g17.LE2-1301.013.cam.i.2015-01-01-00000.nc</dd><dt><span>topography_file :</span></dt><dd>/mnt/lustre/share/CESM/cesm_input/atm/cam/topo/fv_0.9x1.25_nc3000_Nsw042_Nrs008_Co060_Fi001_ZR_sgh30_24km_GRNL_c170103.nc</dd><dt><span>model_doi_url :</span></dt><dd>https://doi.org/10.5065/D67H1H0V</dd><dt><span>time_period_freq :</span></dt><dd>month_1</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>For complex scenarios, you can access each file individually by utilizing the <code class="docutils literal notranslate"><span class="pre">open_dataset</span></code> function with the specified <code class="docutils literal notranslate"><span class="pre">chunk</span></code>s and then combine the outputs into a single dataset later.</p>
<p>Note that the “real” values are not displayed, since that would trigger actual computation.</p>
<div class="alert alert-success" markdown="1">
<p>Xarray automatically wraps Dask Arrays and Dask is lazy, meaning that operations are not computed until we explicitly request them, for example by calling <code class="docutils literal notranslate"><span class="pre">.compute()</span></code>.</p>
</div>
<p>Please see previous notebooks for more information on “lazy evaluation”.</p>
<p>The represntation of <code class="docutils literal notranslate"><span class="pre">TREFHT</span></code> DataArray shows details of chunks and chunk-sizes of Xarray DataArray:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tref</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">TREFHT</span>
<span class="n">tref</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 1032, lat: 192, lon: 288)&gt;
dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;
Coordinates:
  * lat      (lat) float64 -90.0 -89.06 -88.12 -87.17 ... 87.17 88.12 89.06 90.0
  * lon      (lon) float64 0.0 1.25 2.5 3.75 5.0 ... 355.0 356.2 357.5 358.8
  * time     (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00
Attributes: (3)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 1032</li><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>lon</span>: 288</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-6720fc80-f70a-441e-8818-8af1f081c4e5' class='xr-array-in' type='checkbox' ><label for='section-6720fc80-f70a-441e-8818-8af1f081c4e5' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 217.69 MiB </td>
                        <td> 25.31 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192, 288) </td>
                        <td> (120, 192, 288) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="41" x2="80" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="41" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="49" />
  <line x1="26" y1="16" x2="26" y2="58" />
  <line x1="34" y1="24" x2="34" y2="66" />
  <line x1="42" y1="32" x2="42" y2="74" />
  <line x1="51" y1="41" x2="51" y2="82" />
  <line x1="59" y1="49" x2="59" y2="90" />
  <line x1="67" y1="57" x2="67" y2="99" />
  <line x1="75" y1="65" x2="75" y2="107" />
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,112.28685677722032 10.0,41.69862148310268" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="53" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="61" y2="8" />
  <line x1="26" y1="16" x2="69" y2="16" />
  <line x1="34" y1="24" x2="77" y2="24" />
  <line x1="42" y1="32" x2="86" y2="32" />
  <line x1="51" y1="41" x2="94" y2="41" />
  <line x1="59" y1="49" x2="102" y2="49" />
  <line x1="67" y1="57" x2="110" y2="57" />
  <line x1="75" y1="65" x2="118" y2="65" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="53" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 53.29712651467347,0.0 123.88536180879112,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="112" x2="123" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />
  <line x1="123" y1="70" x2="123" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.88536180879112,70.58823529411765 123.88536180879112,112.28685677722032 80.58823529411765,112.28685677722032" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="102.236799" y="132.286857" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="143.885362" y="91.437546" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.885362,91.437546)">192</text>
  <text x="35.294118" y="96.992739" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,96.992739)">1032</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-a542e932-6ff4-4ce4-bec6-b69047f074b7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-a542e932-6ff4-4ce4-bec6-b69047f074b7' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-f1ffa74c-228d-4b7e-9b04-33b5914c1ecc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f1ffa74c-228d-4b7e-9b04-33b5914c1ecc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-87a27a5f-5819-43ce-9124-b2fef1760520' class='xr-var-data-in' type='checkbox'><label for='data-87a27a5f-5819-43ce-9124-b2fef1760520' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-5820ad80-01b5-4ff9-aa4a-15e7f55d2472' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5820ad80-01b5-4ff9-aa4a-15e7f55d2472' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4aa8c0ae-0a09-4831-b69d-1ff9de7af40c' class='xr-var-data-in' type='checkbox'><label for='data-4aa8c0ae-0a09-4831-b69d-1ff9de7af40c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-503dc34a-c027-4a4a-a7ac-5529ccc7d023' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-503dc34a-c027-4a4a-a7ac-5529ccc7d023' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c8e60605-b0d9-4778-aa59-5fa83264053d' class='xr-var-data-in' type='checkbox'><label for='data-c8e60605-b0d9-4778-aa59-5fa83264053d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1648cfc0-c1a1-4d93-9d91-f94591bef54d' class='xr-section-summary-in' type='checkbox'  ><label for='section-1648cfc0-c1a1-4d93-9d91-f94591bef54d' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-a879135f-26a0-4366-a3bf-e0090f4fb62b' class='xr-index-data-in' type='checkbox'/><label for='index-a879135f-26a0-4366-a3bf-e0090f4fb62b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([             -90.0, -89.05759162303664,  -88.1151832460733,
       -87.17277486910994,  -86.2303664921466, -85.28795811518324,
        -84.3455497382199, -83.40314136125654, -82.46073298429319,
       -81.51832460732984,
       ...
        81.51832460732984,  82.46073298429319,  83.40314136125654,
         84.3455497382199,  85.28795811518324,   86.2303664921466,
        87.17277486910994,   88.1151832460733,  89.05759162303664,
                     90.0],
      dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;, length=192))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-84e1cab0-39bc-4eb8-a4f1-95b0064b5606' class='xr-index-data-in' type='checkbox'/><label for='index-84e1cab0-39bc-4eb8-a4f1-95b0064b5606' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   1.25,    2.5,   3.75,    5.0,   6.25,    7.5,   8.75,   10.0,
        11.25,
       ...
        347.5, 348.75,  350.0, 351.25,  352.5, 353.75,  355.0, 356.25,  357.5,
       358.75],
      dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;, length=288))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-5a4a4e33-cf72-4688-8b72-0d9346857099' class='xr-index-data-in' type='checkbox'/><label for='index-5a4a4e33-cf72-4688-8b72-0d9346857099' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bef4d39b-c675-420b-b1df-4c0345b5f96a' class='xr-section-summary-in' type='checkbox'  ><label for='section-bef4d39b-c675-420b-b1df-4c0345b5f96a' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>Reference height temperature</dd><dt><span>cell_methods :</span></dt><dd>time: mean</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tref</span><span class="o">.</span><span class="n">chunks</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>((120, 120, 120, 120, 120, 120, 120, 120, 72), (192,), (288,))
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>How many chunks do we have?</p></li>
<li><p>What is the size of each chunk size?</p></li>
</ul>
<p>Here we can see that we have a total of 9 chunks - equal to the number of our netCDF files. In general <code class="docutils literal notranslate"><span class="pre">open_mfdataset</span></code> will return one chunk per netCDF file.</p>
<div class="alert alert-block alert-warning">
<p><strong>WARNING:</strong> The chunk structure within the file is important. When re-chunking the dataset after creation with <code class="docutils literal notranslate"><span class="pre">ds.chunk()</span></code> it is recommended to only use multiples of the on-file chunk shape.</p>
</div>
<p>We can check what that shape is by looking at the encoding:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tref</span><span class="o">.</span><span class="n">encoding</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;chunksizes&#39;: (1, 192, 288),
 &#39;fletcher32&#39;: False,
 &#39;shuffle&#39;: True,
 &#39;preferred_chunks&#39;: {&#39;time&#39;: 1, &#39;lat&#39;: 192, &#39;lon&#39;: 288},
 &#39;zlib&#39;: True,
 &#39;complevel&#39;: 1,
 &#39;source&#39;: &#39;/glade/campaign/cgd/cesm/CESM2-LE/timeseries/atm/proc/tseries/month_1/TREFHT/b.e21.BSSP370smbb.f09_g17.LE2-1301.013.cam.h0.TREFHT.201501-202412.nc&#39;,
 &#39;original_shape&#39;: (120, 192, 288),
 &#39;dtype&#39;: dtype(&#39;float32&#39;)}
</pre></div>
</div>
</div>
</div>
<div class="alert alert-block alert-info" markdown="1">
<p><strong>TIP:</strong> The <code class="docutils literal notranslate"><span class="pre">chunks</span></code> parameter can significantly affect total performance when using Dask Arrays. <code class="docutils literal notranslate"><span class="pre">chunks</span></code> should be small enough that each chunk fit in the memory, but large enough to avoid that the communication overhead.</p>
</div><p>A good rule of thumb is to create arrays with a minimum chunksize of at least one million elements. Here we have 120x192x288 elements in each chunk (except for the last chunk).<br />
With large arrays (10+ GB), the cost of queuing up Dask operations can be noticeable, and you may need even larger chunksizes.</p>
<p><strong>Additional Reading</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/array-best-practices.html#select-a-good-chunk-size">dask.array best practices</a></p></li>
<li><p><a class="reference external" href="https://ncar.github.io/dask-tutorial/notebooks/06-dask-chunking.html">NCAR chunking tutorial</a></p></li>
<li><p><a class="reference external" href="https://blog.dask.org/2021/11/02/choosing-dask-chunk-sizes">Dask blog post on chunking</a></p></li>
</ul>
<section id="xarray-data-structures-are-dask-collections">
<h3>Xarray data structures are Dask collections.<a class="headerlink" href="#xarray-data-structures-are-dask-collections" title="Permalink to this heading">#</a></h3>
<p>This means you can call the following Dask-related functions on Xarray Data Arrays and Datasets:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.visualize()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.compute()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.persist()</span></code></p></li>
</ul>
<p>For more information about Dask Arrays, please see <a class="reference external" href="https://projectpythia.org/dask-cookbook/notebooks/01-dask-array.html">Dask Array chapter</a>.</p>
<p>If we check Dask Task Graph for <code class="docutils literal notranslate"><span class="pre">tref_mean</span></code>, we can see all the steps required for calculating it (from opening the netcdf file to calculating mean and aggreagting it).</p>
</section>
<section id="getting-concrete-values">
<h3>Getting concrete values<a class="headerlink" href="#getting-concrete-values" title="Permalink to this heading">#</a></h3>
<p>At some point, you will want to actually do the calculations and receive concrete values from Dask.</p>
<p>There are two ways to compute values on dask arrays.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">compute()</span></code> returns a new xarray object with the data now represented as a numpy array.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load()</span></code> replaces the dask array in the xarray object with a numpy array. Equivalent to <code class="docutils literal notranslate"><span class="pre">ds</span> <span class="pre">=</span> <span class="pre">ds.compute()</span></code>.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">.load()</span></code> operates <em>inplace</em> and <code class="docutils literal notranslate"><span class="pre">.compute()</span></code> returns a new xarray object.</p>
<section id="distributed-non-blocking-concrete-values">
<h4>Distributed non-blocking concrete values<a class="headerlink" href="#distributed-non-blocking-concrete-values" title="Permalink to this heading">#</a></h4>
<p>There is another option available  third option : “persisting”. <code class="docutils literal notranslate"><span class="pre">.persist()</span></code> loads the values into distributed RAM. The values are computed but remain distributed across workers. So essentially <code class="docutils literal notranslate"><span class="pre">persist</span></code> turns a lazy Dask collection into a Dask collection where the results are either fully computed or actively computing in the background.</p>
<p>So <code class="docutils literal notranslate"><span class="pre">ds.air.persist()</span></code> is still backed by a Dask array. This is useful if you will be repeatedly using a dataset for computation but it is too large to load into local memory.</p>
<p>Read more: <a class="reference external" href="https://docs.dask.org/en/stable/generated/dask.dataframe.Series.persist.html">Dask user guide</a></p>
</section>
</section>
</section>
<section id="how-to-access-underlying-data-in-an-xarray-object">
<h2>How to access underlying data in an Xarray object?<a class="headerlink" href="#how-to-access-underlying-data-in-an-xarray-object" title="Permalink to this heading">#</a></h2>
<p>There are two basic ways to extract values from an Xarray object:</p>
<ol class="arabic simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">.data</span></code> will return a Dask array. For example:</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tref</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 217.69 MiB </td>
                        <td> 25.31 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192, 288) </td>
                        <td> (120, 192, 288) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 19 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="41" x2="80" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="41" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="49" />
  <line x1="26" y1="16" x2="26" y2="58" />
  <line x1="34" y1="24" x2="34" y2="66" />
  <line x1="42" y1="32" x2="42" y2="74" />
  <line x1="51" y1="41" x2="51" y2="82" />
  <line x1="59" y1="49" x2="59" y2="90" />
  <line x1="67" y1="57" x2="67" y2="99" />
  <line x1="75" y1="65" x2="75" y2="107" />
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,112.28685677722032 10.0,41.69862148310268" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="53" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="61" y2="8" />
  <line x1="26" y1="16" x2="69" y2="16" />
  <line x1="34" y1="24" x2="77" y2="24" />
  <line x1="42" y1="32" x2="86" y2="32" />
  <line x1="51" y1="41" x2="94" y2="41" />
  <line x1="59" y1="49" x2="102" y2="49" />
  <line x1="67" y1="57" x2="110" y2="57" />
  <line x1="75" y1="65" x2="118" y2="65" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="53" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 53.29712651467347,0.0 123.88536180879112,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="112" x2="123" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />
  <line x1="123" y1="70" x2="123" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.88536180879112,70.58823529411765 123.88536180879112,112.28685677722032 80.58823529411765,112.28685677722032" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="102.236799" y="132.286857" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="143.885362" y="91.437546" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.885362,91.437546)">192</text>
  <text x="35.294118" y="96.992739" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,96.992739)">1032</text>
</svg>
        </td>
    </tr>
</table></div></div>
</div>
<p><strong>This means that for Dask-backed Xarray object, we can access the values using <code class="docutils literal notranslate"><span class="pre">.compute</span></code></strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="n">tref</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 68.1 ms, sys: 204 ms, total: 272 ms
Wall time: 917 ms
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[248.39987, 248.39989, 248.39992, ..., 248.39989, 248.39989,
         248.39989],
        [248.95004, 248.9094 , 248.75017, ..., 248.98384, 248.97466,
         248.9626 ],
        [249.20784, 249.17082, 249.15718, ..., 249.42188, 249.37703,
         249.31105],
        ...,
        [251.5821 , 251.6182 , 251.65166, ..., 251.48357, 251.51555,
         251.54646],
        [251.34143, 251.35114, 251.36166, ..., 251.30699, 251.32008,
         251.3312 ],
        [251.35237, 251.35286, 251.35332, ..., 251.35059, 251.35123,
         251.35182]],

       [[237.44759, 237.44759, 237.44759, ..., 237.44759, 237.44759,
         237.44759],
        [238.10292, 238.05934, 237.8917 , ..., 238.16042, 238.14326,
         238.12119],
        [238.86865, 238.82155, 238.79092, ..., 239.1196 , 239.04976,
         238.96754],
        ...,
        [246.23404, 246.25865, 246.28221, ..., 246.15912, 246.18312,
         246.20715],
        [246.70511, 246.7112 , 246.71793, ..., 246.68782, 246.69476,
         246.69987],
        [247.26158, 247.26067, 247.25984, ..., 247.26494, 247.2637 ,
         247.26259]],

       [[227.2174 , 227.2174 , 227.2174 , ..., 227.2174 , 227.2174 ,
         227.2174 ],
        [227.27689, 227.23364, 227.07358, ..., 227.32939, 227.3166 ,
         227.2957 ],
        [227.58324, 227.54382, 227.52094, ..., 227.81204, 227.76472,
         227.69241],
        ...,
        [247.57649, 247.60806, 247.63834, ..., 247.49849, 247.52321,
         247.54758],
        [247.34538, 247.35608, 247.36736, ..., 247.30998, 247.32211,
         247.33403],
        [247.2048 , 247.20529, 247.20573, ..., 247.20308, 247.20372,
         247.20428]],

       ...,

       [[230.82976, 230.82976, 230.82976, ..., 230.82976, 230.82976,
         230.82976],
        [231.51309, 231.47168, 231.3188 , ..., 231.55086, 231.54416,
         231.53171],
        [232.11208, 232.0665 , 232.04721, ..., 232.34473, 232.29143,
         232.22214],
        ...,
        [273.3896 , 273.38998, 273.3906 , ..., 273.3897 , 273.3895 ,
         273.3894 ],
        [273.46066, 273.46008, 273.45963, ..., 273.4635 , 273.4624 ,
         273.46143],
        [273.5544 , 273.55417, 273.55392, ..., 273.5554 , 273.55505,
         273.55472]],

       [[240.62163, 240.62163, 240.62163, ..., 240.62163, 240.62163,
         240.62163],
        [241.24452, 241.20761, 241.05177, ..., 241.27812, 241.26988,
         241.2583 ],
        [241.4827 , 241.44122, 241.42111, ..., 241.70222, 241.65529,
         241.58728],
        ...,
        [271.83112, 271.82843, 271.82672, ..., 271.84128, 271.83743,
         271.8343 ],
        [272.06815, 272.06625, 272.06448, ..., 272.07593, 272.07327,
         272.07053],
        [272.28296, 272.2825 , 272.2821 , ..., 272.28467, 272.28403,
         272.28348]],

       [[250.27185, 250.2721 , 250.27223, ..., 250.27199, 250.27199,
         250.27194],
        [251.08855, 251.05937, 250.90967, ..., 251.1056 , 251.10072,
         251.09595],
        [251.64214, 251.61182, 251.6042 , ..., 251.83585, 251.79689,
         251.7379 ],
        ...,
        [271.2762 , 271.2781 , 271.28018, ..., 271.2714 , 271.27295,
         271.27457],
        [271.2889 , 271.28967, 271.2904 , ..., 271.28693, 271.28738,
         271.28815],
        [271.26477, 271.26483, 271.2649 , ..., 271.26456, 271.26465,
         271.2647 ]]], dtype=float32)
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>We can also use <code class="docutils literal notranslate"><span class="pre">.values</span></code> to see the “real” values of Xarray object. Another option is using <code class="docutils literal notranslate"><span class="pre">.to_numpy</span></code>. Both of these option return the values of underlying Dask object in a numpy array.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">tref</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 60.5 ms, sys: 216 ms, total: 277 ms
Wall time: 911 ms
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[[248.39987, 248.39989, 248.39992, ..., 248.39989, 248.39989,
         248.39989],
        [248.95004, 248.9094 , 248.75017, ..., 248.98384, 248.97466,
         248.9626 ],
        [249.20784, 249.17082, 249.15718, ..., 249.42188, 249.37703,
         249.31105],
        ...,
        [251.5821 , 251.6182 , 251.65166, ..., 251.48357, 251.51555,
         251.54646],
        [251.34143, 251.35114, 251.36166, ..., 251.30699, 251.32008,
         251.3312 ],
        [251.35237, 251.35286, 251.35332, ..., 251.35059, 251.35123,
         251.35182]],

       [[237.44759, 237.44759, 237.44759, ..., 237.44759, 237.44759,
         237.44759],
        [238.10292, 238.05934, 237.8917 , ..., 238.16042, 238.14326,
         238.12119],
        [238.86865, 238.82155, 238.79092, ..., 239.1196 , 239.04976,
         238.96754],
        ...,
        [246.23404, 246.25865, 246.28221, ..., 246.15912, 246.18312,
         246.20715],
        [246.70511, 246.7112 , 246.71793, ..., 246.68782, 246.69476,
         246.69987],
        [247.26158, 247.26067, 247.25984, ..., 247.26494, 247.2637 ,
         247.26259]],

       [[227.2174 , 227.2174 , 227.2174 , ..., 227.2174 , 227.2174 ,
         227.2174 ],
        [227.27689, 227.23364, 227.07358, ..., 227.32939, 227.3166 ,
         227.2957 ],
        [227.58324, 227.54382, 227.52094, ..., 227.81204, 227.76472,
         227.69241],
        ...,
        [247.57649, 247.60806, 247.63834, ..., 247.49849, 247.52321,
         247.54758],
        [247.34538, 247.35608, 247.36736, ..., 247.30998, 247.32211,
         247.33403],
        [247.2048 , 247.20529, 247.20573, ..., 247.20308, 247.20372,
         247.20428]],

       ...,

       [[230.82976, 230.82976, 230.82976, ..., 230.82976, 230.82976,
         230.82976],
        [231.51309, 231.47168, 231.3188 , ..., 231.55086, 231.54416,
         231.53171],
        [232.11208, 232.0665 , 232.04721, ..., 232.34473, 232.29143,
         232.22214],
        ...,
        [273.3896 , 273.38998, 273.3906 , ..., 273.3897 , 273.3895 ,
         273.3894 ],
        [273.46066, 273.46008, 273.45963, ..., 273.4635 , 273.4624 ,
         273.46143],
        [273.5544 , 273.55417, 273.55392, ..., 273.5554 , 273.55505,
         273.55472]],

       [[240.62163, 240.62163, 240.62163, ..., 240.62163, 240.62163,
         240.62163],
        [241.24452, 241.20761, 241.05177, ..., 241.27812, 241.26988,
         241.2583 ],
        [241.4827 , 241.44122, 241.42111, ..., 241.70222, 241.65529,
         241.58728],
        ...,
        [271.83112, 271.82843, 271.82672, ..., 271.84128, 271.83743,
         271.8343 ],
        [272.06815, 272.06625, 272.06448, ..., 272.07593, 272.07327,
         272.07053],
        [272.28296, 272.2825 , 272.2821 , ..., 272.28467, 272.28403,
         272.28348]],

       [[250.27185, 250.2721 , 250.27223, ..., 250.27199, 250.27199,
         250.27194],
        [251.08855, 251.05937, 250.90967, ..., 251.1056 , 251.10072,
         251.09595],
        [251.64214, 251.61182, 251.6042 , ..., 251.83585, 251.79689,
         251.7379 ],
        ...,
        [271.2762 , 271.2781 , 271.28018, ..., 271.2714 , 271.27295,
         271.27457],
        [271.2889 , 271.28967, 271.2904 , ..., 271.28693, 271.28738,
         271.28815],
        [271.26477, 271.26483, 271.2649 , ..., 271.26456, 271.26465,
         271.2647 ]]], dtype=float32)
</pre></div>
</div>
</div>
</div>
</section>
<section id="computations-and-indexing">
<h2>Computations and Indexing<a class="headerlink" href="#computations-and-indexing" title="Permalink to this heading">#</a></h2>
<p>All built-in Xarray methods (<code class="docutils literal notranslate"><span class="pre">.mean</span></code>, <code class="docutils literal notranslate"><span class="pre">.max</span></code>, <code class="docutils literal notranslate"><span class="pre">.rolling</span></code>, <code class="docutils literal notranslate"><span class="pre">.groupby</span></code> etc.) support dask arrays.</p>
<p>Now, let’s do some computations on this Xarray dataset.</p>
<section id="example-single-point-calculations">
<h3>Example Single Point Calculations<a class="headerlink" href="#example-single-point-calculations" title="Permalink to this heading">#</a></h3>
<p>To start out, let’s do the calculations on a single point first. First, we extract the time series data at a grid point and save it to a variable. Here we select the closest point using <code class="docutils literal notranslate"><span class="pre">.sel</span></code> and load the data.</p>
<p>Let’s get the reference temperature at Boulder, CO. Remeber we can use <code class="docutils literal notranslate"><span class="pre">sel</span></code> with <code class="docutils literal notranslate"><span class="pre">nearest</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tref_boulder</span> <span class="o">=</span> <span class="n">tref</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mf">40.0150</span><span class="p">,</span> <span class="n">lon</span><span class="o">=-</span><span class="mf">105.2705</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="alert alert-block alert-warning" markdown="1">
<p><strong>WARNING:</strong> Remember as soon as you call <code class="docutils literal notranslate"><span class="pre">.load()</span></code> you are telling Dask to trigger computation.</p>
</div><p>Next, we want to get annual average for every year:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -- take annual average</span>
<span class="n">tb_mean</span> <span class="o">=</span> <span class="n">tref_boulder</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s1">&#39;YS&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">tb_mean</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 87)&gt;
291.8 290.3 290.3 290.1 290.7 291.2 ... 294.3 293.5 293.5 293.4 293.9 289.8
Coordinates:
    lat      float64 40.05
    lon      float64 0.0
  * time     (time) object 2015-01-01 00:00:00 ... 2101-01-01 00:00:00
Attributes: (3)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 87</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-660d791a-de36-4acb-87d0-e5624ec3eada' class='xr-array-in' type='checkbox' ><label for='section-660d791a-de36-4acb-87d0-e5624ec3eada' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>291.8 290.3 290.3 290.1 290.7 291.2 ... 293.5 293.5 293.4 293.9 289.8</span></div><div class='xr-array-data'><pre>array([291.76175, 290.2986 , 290.3258 , 290.0671 , 290.73373, 291.21622,
       291.2185 , 290.68777, 290.36615, 291.24475, 291.10928, 290.66568,
       291.23413, 290.79117, 291.17935, 291.08173, 291.26492, 290.43918,
       291.0101 , 290.1961 , 290.921  , 291.27866, 291.41956, 291.19473,
       290.73257, 291.31067, 291.65027, 291.84177, 291.7382 , 291.89676,
       291.94708, 292.9821 , 291.53247, 291.66183, 290.74997, 291.86865,
       290.99942, 291.76474, 291.97342, 291.66156, 291.37723, 291.79553,
       292.2146 , 292.07352, 291.91245, 291.9819 , 292.81973, 292.56833,
       292.7518 , 293.2161 , 292.87964, 292.6476 , 291.84103, 293.16037,
       292.63492, 292.23972, 291.64502, 291.90146, 292.02017, 292.77676,
       292.519  , 293.4558 , 292.83823, 292.3904 , 293.33337, 293.317  ,
       292.63467, 292.94614, 292.91443, 293.40823, 292.76138, 292.56082,
       292.9273 , 292.94125, 293.18338, 293.65744, 293.61575, 293.9967 ,
       294.2455 , 293.0268 , 293.18842, 294.33173, 293.5257 , 293.45233,
       293.43143, 293.89883, 289.79712], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-0299f4ee-277f-4fb9-94ad-81946284653c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0299f4ee-277f-4fb9-94ad-81946284653c' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>40.05</div><input id='attrs-15b15ab7-a9a5-4e99-a8c9-7068858878dd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-15b15ab7-a9a5-4e99-a8c9-7068858878dd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-00717161-d05a-4207-8a7a-5029c38c9328' class='xr-var-data-in' type='checkbox'><label for='data-00717161-d05a-4207-8a7a-5029c38c9328' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array(40.05235602)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0</div><input id='attrs-dfcafc62-6fbd-4933-8d84-6c6399b13306' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dfcafc62-6fbd-4933-8d84-6c6399b13306' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f3f78234-4d61-457a-a33e-8ce6dc217112' class='xr-var-data-in' type='checkbox'><label for='data-f3f78234-4d61-457a-a33e-8ce6dc217112' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array(0.)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-01-01 00:00:00 ... 2101-01-...</div><input id='attrs-358e35fc-3967-4adb-b4e0-712ca58f453a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-358e35fc-3967-4adb-b4e0-712ca58f453a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8e1c4511-f1c1-4d54-a424-3af2bc977533' class='xr-var-data-in' type='checkbox'><label for='data-8e1c4511-f1c1-4d54-a424-3af2bc977533' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2016, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2017, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2018, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2019, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2020, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2021, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2022, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2023, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2024, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2025, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2026, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2027, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2028, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2029, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2030, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2031, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2032, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2033, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2034, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2035, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2036, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2037, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2038, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2039, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2040, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2041, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2042, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2043, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2044, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2045, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2046, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2047, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2048, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2049, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2050, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2051, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2052, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2053, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2054, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2055, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2056, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2057, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2058, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2059, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2060, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2061, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2062, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2063, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2064, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2065, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2066, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2067, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2068, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2069, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2070, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2071, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2072, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2073, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2074, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2075, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2076, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2077, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2078, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2079, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2080, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2081, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2082, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2083, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2084, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2085, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2086, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2087, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2088, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2089, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2090, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2091, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2092, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2093, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2094, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2095, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2096, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2097, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2098, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2099, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 1, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-afa0adf2-c19c-4038-988d-eab57761ebe1' class='xr-section-summary-in' type='checkbox'  ><label for='section-afa0adf2-c19c-4038-988d-eab57761ebe1' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-264d1085-e7d6-4918-ad73-66b10c1f3abc' class='xr-index-data-in' type='checkbox'/><label for='index-264d1085-e7d6-4918-ad73-66b10c1f3abc' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-01-01 00:00:00, 2016-01-01 00:00:00, 2017-01-01 00:00:00,
             2018-01-01 00:00:00, 2019-01-01 00:00:00, 2020-01-01 00:00:00,
             2021-01-01 00:00:00, 2022-01-01 00:00:00, 2023-01-01 00:00:00,
             2024-01-01 00:00:00, 2025-01-01 00:00:00, 2026-01-01 00:00:00,
             2027-01-01 00:00:00, 2028-01-01 00:00:00, 2029-01-01 00:00:00,
             2030-01-01 00:00:00, 2031-01-01 00:00:00, 2032-01-01 00:00:00,
             2033-01-01 00:00:00, 2034-01-01 00:00:00, 2035-01-01 00:00:00,
             2036-01-01 00:00:00, 2037-01-01 00:00:00, 2038-01-01 00:00:00,
             2039-01-01 00:00:00, 2040-01-01 00:00:00, 2041-01-01 00:00:00,
             2042-01-01 00:00:00, 2043-01-01 00:00:00, 2044-01-01 00:00:00,
             2045-01-01 00:00:00, 2046-01-01 00:00:00, 2047-01-01 00:00:00,
             2048-01-01 00:00:00, 2049-01-01 00:00:00, 2050-01-01 00:00:00,
             2051-01-01 00:00:00, 2052-01-01 00:00:00, 2053-01-01 00:00:00,
             2054-01-01 00:00:00, 2055-01-01 00:00:00, 2056-01-01 00:00:00,
             2057-01-01 00:00:00, 2058-01-01 00:00:00, 2059-01-01 00:00:00,
             2060-01-01 00:00:00, 2061-01-01 00:00:00, 2062-01-01 00:00:00,
             2063-01-01 00:00:00, 2064-01-01 00:00:00, 2065-01-01 00:00:00,
             2066-01-01 00:00:00, 2067-01-01 00:00:00, 2068-01-01 00:00:00,
             2069-01-01 00:00:00, 2070-01-01 00:00:00, 2071-01-01 00:00:00,
             2072-01-01 00:00:00, 2073-01-01 00:00:00, 2074-01-01 00:00:00,
             2075-01-01 00:00:00, 2076-01-01 00:00:00, 2077-01-01 00:00:00,
             2078-01-01 00:00:00, 2079-01-01 00:00:00, 2080-01-01 00:00:00,
             2081-01-01 00:00:00, 2082-01-01 00:00:00, 2083-01-01 00:00:00,
             2084-01-01 00:00:00, 2085-01-01 00:00:00, 2086-01-01 00:00:00,
             2087-01-01 00:00:00, 2088-01-01 00:00:00, 2089-01-01 00:00:00,
             2090-01-01 00:00:00, 2091-01-01 00:00:00, 2092-01-01 00:00:00,
             2093-01-01 00:00:00, 2094-01-01 00:00:00, 2095-01-01 00:00:00,
             2096-01-01 00:00:00, 2097-01-01 00:00:00, 2098-01-01 00:00:00,
             2099-01-01 00:00:00, 2100-01-01 00:00:00, 2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=87, calendar=&#x27;noleap&#x27;, freq=&#x27;YS-JAN&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a77adc55-7faf-41c6-a2f2-3816682cd95a' class='xr-section-summary-in' type='checkbox'  ><label for='section-a77adc55-7faf-41c6-a2f2-3816682cd95a' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>Reference height temperature</dd><dt><span>cell_methods :</span></dt><dd>time: mean</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>We can either see the values of our DataArray in the text representation above or by plotting it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tb_mean</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x151c4879b5d0&gt;]
</pre></div>
</div>
<img alt="../_images/d965155cb32b0c801003ddb7a28fe3a9b0a38a65f19d2fb1a58b8cf0ed1667a5.png" src="../_images/d965155cb32b0c801003ddb7a28fe3a9b0a38a65f19d2fb1a58b8cf0ed1667a5.png" />
</div>
</div>
</section>
<section id="calculations-over-all-grids">
<h3>Calculations over all grids<a class="headerlink" href="#calculations-over-all-grids" title="Permalink to this heading">#</a></h3>
<p>Remember, we can use basic calculations in Xarray. For example, let’s convert the unit from Kelvin to degree Celsius:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># change the unit from Kelvin to degree Celsius </span>
<span class="n">tref_c</span> <span class="o">=</span> <span class="n">tref</span> <span class="o">-</span> <span class="mf">273.15</span>
<span class="n">tref_c</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 1032, lat: 192, lon: 288)&gt;
dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;
Coordinates:
  * lat      (lat) float64 -90.0 -89.06 -88.12 -87.17 ... 87.17 88.12 89.06 90.0
  * lon      (lon) float64 0.0 1.25 2.5 3.75 5.0 ... 355.0 356.2 357.5 358.8
  * time     (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 1032</li><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>lon</span>: 288</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-09e9ae7f-4917-4fa5-a3d9-fa984dac8237' class='xr-array-in' type='checkbox' ><label for='section-09e9ae7f-4917-4fa5-a3d9-fa984dac8237' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 217.69 MiB </td>
                        <td> 25.31 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192, 288) </td>
                        <td> (120, 192, 288) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 20 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="41" x2="80" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="41" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="49" />
  <line x1="26" y1="16" x2="26" y2="58" />
  <line x1="34" y1="24" x2="34" y2="66" />
  <line x1="42" y1="32" x2="42" y2="74" />
  <line x1="51" y1="41" x2="51" y2="82" />
  <line x1="59" y1="49" x2="59" y2="90" />
  <line x1="67" y1="57" x2="67" y2="99" />
  <line x1="75" y1="65" x2="75" y2="107" />
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,112.28685677722032 10.0,41.69862148310268" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="53" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="61" y2="8" />
  <line x1="26" y1="16" x2="69" y2="16" />
  <line x1="34" y1="24" x2="77" y2="24" />
  <line x1="42" y1="32" x2="86" y2="32" />
  <line x1="51" y1="41" x2="94" y2="41" />
  <line x1="59" y1="49" x2="102" y2="49" />
  <line x1="67" y1="57" x2="110" y2="57" />
  <line x1="75" y1="65" x2="118" y2="65" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="53" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 53.29712651467347,0.0 123.88536180879112,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="112" x2="123" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />
  <line x1="123" y1="70" x2="123" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.88536180879112,70.58823529411765 123.88536180879112,112.28685677722032 80.58823529411765,112.28685677722032" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="102.236799" y="132.286857" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="143.885362" y="91.437546" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.885362,91.437546)">192</text>
  <text x="35.294118" y="96.992739" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,96.992739)">1032</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-47ed6442-038a-4b6b-b2b4-a9a2bb7fc7ab' class='xr-section-summary-in' type='checkbox'  checked><label for='section-47ed6442-038a-4b6b-b2b4-a9a2bb7fc7ab' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-b0e2b41a-518d-4ca1-b742-af94768ae5b6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b0e2b41a-518d-4ca1-b742-af94768ae5b6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e14fa196-d6cd-44e9-a8bb-c1089284e06c' class='xr-var-data-in' type='checkbox'><label for='data-e14fa196-d6cd-44e9-a8bb-c1089284e06c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-009d85fa-6799-4a90-b0ca-203b7afa3679' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-009d85fa-6799-4a90-b0ca-203b7afa3679' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f855f841-30d5-4df4-b449-2691764191cc' class='xr-var-data-in' type='checkbox'><label for='data-f855f841-30d5-4df4-b449-2691764191cc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-f38bd151-7e8c-4893-a64c-671814819add' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f38bd151-7e8c-4893-a64c-671814819add' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-64301b74-5228-4bf5-b6a8-9959f7ab19c8' class='xr-var-data-in' type='checkbox'><label for='data-64301b74-5228-4bf5-b6a8-9959f7ab19c8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-2474718f-32f4-40eb-bc32-4df67c3da2f7' class='xr-section-summary-in' type='checkbox'  ><label for='section-2474718f-32f4-40eb-bc32-4df67c3da2f7' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-29fc3973-8cfe-4840-a13c-6de665d92cbc' class='xr-index-data-in' type='checkbox'/><label for='index-29fc3973-8cfe-4840-a13c-6de665d92cbc' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([             -90.0, -89.05759162303664,  -88.1151832460733,
       -87.17277486910994,  -86.2303664921466, -85.28795811518324,
        -84.3455497382199, -83.40314136125654, -82.46073298429319,
       -81.51832460732984,
       ...
        81.51832460732984,  82.46073298429319,  83.40314136125654,
         84.3455497382199,  85.28795811518324,   86.2303664921466,
        87.17277486910994,   88.1151832460733,  89.05759162303664,
                     90.0],
      dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;, length=192))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-cc20bd5a-f796-430a-91b7-d6a3eac32cb4' class='xr-index-data-in' type='checkbox'/><label for='index-cc20bd5a-f796-430a-91b7-d6a3eac32cb4' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   1.25,    2.5,   3.75,    5.0,   6.25,    7.5,   8.75,   10.0,
        11.25,
       ...
        347.5, 348.75,  350.0, 351.25,  352.5, 353.75,  355.0, 356.25,  357.5,
       358.75],
      dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;, length=288))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-d2fbea42-5eca-41cc-a500-7752b7a5383a' class='xr-index-data-in' type='checkbox'/><label for='index-d2fbea42-5eca-41cc-a500-7752b7a5383a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1f1204e3-2cd9-4f49-9e9e-f25d137c6bf1' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-1f1204e3-2cd9-4f49-9e9e-f25d137c6bf1' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span> 

<span class="n">tref_c</span> <span class="o">=</span> <span class="n">tref_c</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 75.6 ms, sys: 546 ms, total: 621 ms
Wall time: 1.33 s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="c1"># Compute monthly anomaly</span>

<span class="c1"># -- 1. calculate monthly average</span>
<span class="n">tref_grouped</span> <span class="o">=</span> <span class="n">tref</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;time.month&#39;</span><span class="p">)</span>
<span class="n">tmean</span> <span class="o">=</span> <span class="n">tref_grouped</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>

<span class="c1">#-- 2. calculate monthly anomaly</span>
<span class="n">tos_anom</span> <span class="o">=</span> <span class="n">tref_grouped</span> <span class="o">-</span> <span class="n">tmean</span>
<span class="n">tos_anom</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 59 ms, sys: 540 µs, total: 59.6 ms
Wall time: 206 ms
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 1032, lat: 192, lon: 288)&gt;
dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;
Coordinates:
  * lat      (lat) float64 -90.0 -89.06 -88.12 -87.17 ... 87.17 88.12 89.06 90.0
  * lon      (lon) float64 0.0 1.25 2.5 3.75 5.0 ... 355.0 356.2 357.5 358.8
  * time     (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00
    month    (time) int64 2 3 4 5 6 7 8 9 10 11 12 ... 3 4 5 6 7 8 9 10 11 12 1</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 1032</li><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>lon</span>: 288</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-e2dd49d7-004c-46d5-8510-3f6e3223e2f9' class='xr-array-in' type='checkbox' ><label for='section-e2dd49d7-004c-46d5-8510-3f6e3223e2f9' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(120, 192, 288), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 217.69 MiB </td>
                        <td> 25.31 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192, 288) </td>
                        <td> (120, 192, 288) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 30 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="41" x2="80" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="41" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="49" />
  <line x1="26" y1="16" x2="26" y2="58" />
  <line x1="34" y1="24" x2="34" y2="66" />
  <line x1="42" y1="32" x2="42" y2="74" />
  <line x1="51" y1="41" x2="51" y2="82" />
  <line x1="59" y1="49" x2="59" y2="90" />
  <line x1="67" y1="57" x2="67" y2="99" />
  <line x1="75" y1="65" x2="75" y2="107" />
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,112.28685677722032 10.0,41.69862148310268" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="53" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="61" y2="8" />
  <line x1="26" y1="16" x2="69" y2="16" />
  <line x1="34" y1="24" x2="77" y2="24" />
  <line x1="42" y1="32" x2="86" y2="32" />
  <line x1="51" y1="41" x2="94" y2="41" />
  <line x1="59" y1="49" x2="102" y2="49" />
  <line x1="67" y1="57" x2="110" y2="57" />
  <line x1="75" y1="65" x2="118" y2="65" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="53" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 53.29712651467347,0.0 123.88536180879112,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="112" x2="123" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />
  <line x1="123" y1="70" x2="123" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.88536180879112,70.58823529411765 123.88536180879112,112.28685677722032 80.58823529411765,112.28685677722032" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="102.236799" y="132.286857" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="143.885362" y="91.437546" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.885362,91.437546)">192</text>
  <text x="35.294118" y="96.992739" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,96.992739)">1032</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-9fb87ed4-b2eb-4056-be8b-80708e2aa91c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9fb87ed4-b2eb-4056-be8b-80708e2aa91c' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-317bb12f-248e-41f8-914a-24e4a50a82a2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-317bb12f-248e-41f8-914a-24e4a50a82a2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-16cc25c8-24ac-480d-bd2e-2c6b893a7e8b' class='xr-var-data-in' type='checkbox'><label for='data-16cc25c8-24ac-480d-bd2e-2c6b893a7e8b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-e5c471c5-021a-48d1-8103-e2a95194646b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e5c471c5-021a-48d1-8103-e2a95194646b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-553b269d-a9ab-4b04-bd7d-d32a05de1e70' class='xr-var-data-in' type='checkbox'><label for='data-553b269d-a9ab-4b04-bd7d-d32a05de1e70' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-521384bb-e6a7-4453-80a0-d0324d5196cc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-521384bb-e6a7-4453-80a0-d0324d5196cc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-71a3725d-f9cb-4466-abee-f475c770b397' class='xr-var-data-in' type='checkbox'><label for='data-71a3725d-f9cb-4466-abee-f475c770b397' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>month</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>2 3 4 5 6 7 8 ... 7 8 9 10 11 12 1</div><input id='attrs-70523b57-e9ad-49a9-8ff2-ea0bf26d842b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-70523b57-e9ad-49a9-8ff2-ea0bf26d842b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f7361ba4-694e-4f9b-8bc4-23e8386eac75' class='xr-var-data-in' type='checkbox'><label for='data-f7361ba4-694e-4f9b-8bc4-23e8386eac75' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([ 2,  3,  4, ..., 11, 12,  1])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c8800ce2-5fd7-4fb2-beb8-3e6820ef047b' class='xr-section-summary-in' type='checkbox'  ><label for='section-c8800ce2-5fd7-4fb2-beb8-3e6820ef047b' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-2ab4c1c2-cc77-4dd1-8dc0-875e71398daf' class='xr-index-data-in' type='checkbox'/><label for='index-2ab4c1c2-cc77-4dd1-8dc0-875e71398daf' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([             -90.0, -89.05759162303664,  -88.1151832460733,
       -87.17277486910994,  -86.2303664921466, -85.28795811518324,
        -84.3455497382199, -83.40314136125654, -82.46073298429319,
       -81.51832460732984,
       ...
        81.51832460732984,  82.46073298429319,  83.40314136125654,
         84.3455497382199,  85.28795811518324,   86.2303664921466,
        87.17277486910994,   88.1151832460733,  89.05759162303664,
                     90.0],
      dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;, length=192))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f4d63e54-b6be-4a21-b401-ae8dd4d96120' class='xr-index-data-in' type='checkbox'/><label for='index-f4d63e54-b6be-4a21-b401-ae8dd4d96120' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   1.25,    2.5,   3.75,    5.0,   6.25,    7.5,   8.75,   10.0,
        11.25,
       ...
        347.5, 348.75,  350.0, 351.25,  352.5, 353.75,  355.0, 356.25,  357.5,
       358.75],
      dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;, length=288))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-d1dce519-89ad-4691-8f81-9be2efc2035f' class='xr-index-data-in' type='checkbox'/><label for='index-d1dce519-89ad-4691-8f81-9be2efc2035f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-897675c4-3c63-4878-9fcd-90edb4593162' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-897675c4-3c63-4878-9fcd-90edb4593162' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="n">computed_anom</span> <span class="o">=</span> <span class="n">tos_anom</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">computed_anom</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 145 ms, sys: 204 ms, total: 349 ms
Wall time: 2.36 s
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>xarray.core.dataarray.DataArray
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tos_anom</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lat</span><span class="o">=</span><span class="mf">40.0150</span><span class="p">,</span> <span class="n">lon</span><span class="o">=-</span><span class="mf">105.2705</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x152698f96990&gt;]
</pre></div>
</div>
<img alt="../_images/1c5b8643147256774a867df59f9574f37cf411bff0452a5e284ee44e5bea488e.png" src="../_images/1c5b8643147256774a867df59f9574f37cf411bff0452a5e284ee44e5bea488e.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tos_anom</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="s1">&#39;2030-01-01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.QuadMesh at 0x152699047d10&gt;
</pre></div>
</div>
<img alt="../_images/51ebc035ac962cce1552c432a34a44ec298960ce0eca523809199e557586dd83.png" src="../_images/51ebc035ac962cce1552c432a34a44ec298960ce0eca523809199e557586dd83.png" />
</div>
</div>
<div class="alert alert-block alert-info" markdown="1">
<p><b>TIP:</b> Using Xarray plotting functionality automatically triggers computations on the Dask Array, similar to <code class="docutils literal notranslate"><span class="pre">.compute()</span></code>.</p>
</div><p>We can do more complex calculations too:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rolling_mean</span> <span class="o">=</span> <span class="n">tref</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">rolling_mean</span>  <span class="c1"># contains dask array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 1032, lat: 192, lon: 288)&gt;
dask.array&lt;chunksize=(124, 192, 288), meta=np.ndarray&gt;
Coordinates:
  * lat      (lat) float64 -90.0 -89.06 -88.12 -87.17 ... 87.17 88.12 89.06 90.0
  * lon      (lon) float64 0.0 1.25 2.5 3.75 5.0 ... 355.0 356.2 357.5 358.8
  * time     (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00
Attributes: (3)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 1032</li><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>lon</span>: 288</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-f03fb278-9425-49f8-b28d-6480bfb169a5' class='xr-array-in' type='checkbox' ><label for='section-f03fb278-9425-49f8-b28d-6480bfb169a5' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(124, 192, 288), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 217.69 MiB </td>
                        <td> 26.16 MiB </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032, 192, 288) </td>
                        <td> (124, 192, 288) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 44 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="162" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="41" x2="80" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="41" style="stroke-width:2" />
  <line x1="18" y1="8" x2="18" y2="50" />
  <line x1="26" y1="16" x2="26" y2="58" />
  <line x1="34" y1="24" x2="34" y2="66" />
  <line x1="43" y1="33" x2="43" y2="74" />
  <line x1="51" y1="41" x2="51" y2="83" />
  <line x1="59" y1="49" x2="59" y2="91" />
  <line x1="67" y1="57" x2="67" y2="99" />
  <line x1="75" y1="65" x2="75" y2="107" />
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,112.28685677722032 10.0,41.69862148310268" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="53" y2="0" style="stroke-width:2" />
  <line x1="18" y1="8" x2="61" y2="8" />
  <line x1="26" y1="16" x2="69" y2="16" />
  <line x1="34" y1="24" x2="78" y2="24" />
  <line x1="43" y1="33" x2="86" y2="33" />
  <line x1="51" y1="41" x2="94" y2="41" />
  <line x1="59" y1="49" x2="102" y2="49" />
  <line x1="67" y1="57" x2="111" y2="57" />
  <line x1="75" y1="65" x2="119" y2="65" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="53" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 53.29712651467347,0.0 123.88536180879112,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="112" x2="123" y2="112" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="112" style="stroke-width:2" />
  <line x1="123" y1="70" x2="123" y2="112" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.88536180879112,70.58823529411765 123.88536180879112,112.28685677722032 80.58823529411765,112.28685677722032" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="102.236799" y="132.286857" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="143.885362" y="91.437546" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.885362,91.437546)">192</text>
  <text x="35.294118" y="96.992739" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,96.992739)">1032</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-b9429e1d-61b7-49b3-b7ed-792994d404d2' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b9429e1d-61b7-49b3-b7ed-792994d404d2' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-3895d4f4-993a-411c-8b37-c6be0b0aa5f8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3895d4f4-993a-411c-8b37-c6be0b0aa5f8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c32e29b3-9d14-456b-ae76-e6896d94fd52' class='xr-var-data-in' type='checkbox'><label for='data-c32e29b3-9d14-456b-ae76-e6896d94fd52' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-c4f79caa-b014-4e4b-a5ab-7d7977e21030' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c4f79caa-b014-4e4b-a5ab-7d7977e21030' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e15061fa-94dd-4901-8901-04778614e5c6' class='xr-var-data-in' type='checkbox'><label for='data-e15061fa-94dd-4901-8901-04778614e5c6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-b006e7da-6ef3-402e-8c64-afb39ac6caf8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b006e7da-6ef3-402e-8c64-afb39ac6caf8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-04e7cbdf-baa7-432e-adf8-62ab49eed384' class='xr-var-data-in' type='checkbox'><label for='data-04e7cbdf-baa7-432e-adf8-62ab49eed384' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b511bd0b-01f2-4802-b2d1-d60d09a0b599' class='xr-section-summary-in' type='checkbox'  ><label for='section-b511bd0b-01f2-4802-b2d1-d60d09a0b599' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-6b963deb-925d-4f11-8b4a-c7c9e484bec5' class='xr-index-data-in' type='checkbox'/><label for='index-6b963deb-925d-4f11-8b4a-c7c9e484bec5' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([             -90.0, -89.05759162303664,  -88.1151832460733,
       -87.17277486910994,  -86.2303664921466, -85.28795811518324,
        -84.3455497382199, -83.40314136125654, -82.46073298429319,
       -81.51832460732984,
       ...
        81.51832460732984,  82.46073298429319,  83.40314136125654,
         84.3455497382199,  85.28795811518324,   86.2303664921466,
        87.17277486910994,   88.1151832460733,  89.05759162303664,
                     90.0],
      dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;, length=192))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e6c81f22-8af4-42b4-81e5-c1887a6b7ada' class='xr-index-data-in' type='checkbox'/><label for='index-e6c81f22-8af4-42b4-81e5-c1887a6b7ada' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   1.25,    2.5,   3.75,    5.0,   6.25,    7.5,   8.75,   10.0,
        11.25,
       ...
        347.5, 348.75,  350.0, 351.25,  352.5, 353.75,  355.0, 356.25,  357.5,
       358.75],
      dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;, length=288))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1ca757f6-e8f4-477e-9ffd-b136673a1133' class='xr-index-data-in' type='checkbox'/><label for='index-1ca757f6-e8f4-477e-9ffd-b136673a1133' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-5476e193-39d2-44b6-817e-4b37b3f4aa16' class='xr-section-summary-in' type='checkbox'  ><label for='section-5476e193-39d2-44b6-817e-4b37b3f4aa16' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>Reference height temperature</dd><dt><span>cell_methods :</span></dt><dd>time: mean</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">timeseries</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># no activity on dashboard</span>
<span class="n">timeseries</span>  <span class="c1"># contains dask array</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 1032)&gt;
dask.array&lt;chunksize=(124,), meta=np.ndarray&gt;
Coordinates:
    lat      float64 -71.15
    lon      float64 1.25
  * time     (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00
Attributes: (3)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 1032</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-a31519e4-f7e8-4c1c-bcfe-35434e4266b7' class='xr-array-in' type='checkbox' ><label for='section-a31519e4-f7e8-4c1c-bcfe-35434e4266b7' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(124,), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <th> Bytes </th>
                        <td> 4.03 kiB </td>
                        <td> 496 B </td>
                    </tr>
                    
                    <tr>
                        <th> Shape </th>
                        <td> (1032,) </td>
                        <td> (124,) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 45 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="170" height="75" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="120" y2="0" style="stroke-width:2" />
  <line x1="0" y1="25" x2="120" y2="25" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="25" style="stroke-width:2" />
  <line x1="14" y1="0" x2="14" y2="25" />
  <line x1="28" y1="0" x2="28" y2="25" />
  <line x1="42" y1="0" x2="42" y2="25" />
  <line x1="56" y1="0" x2="56" y2="25" />
  <line x1="70" y1="0" x2="70" y2="25" />
  <line x1="84" y1="0" x2="84" y2="25" />
  <line x1="98" y1="0" x2="98" y2="25" />
  <line x1="112" y1="0" x2="112" y2="25" />
  <line x1="120" y1="0" x2="120" y2="25" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 120.0,0.0 120.0,25.412616514582485 0.0,25.412616514582485" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="60.000000" y="45.412617" font-size="1.0rem" font-weight="100" text-anchor="middle" >1032</text>
  <text x="140.000000" y="12.706308" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(0,140.000000,12.706308)">1</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-72225c7f-ecd9-4511-8868-f330631e9900' class='xr-section-summary-in' type='checkbox'  checked><label for='section-72225c7f-ecd9-4511-8868-f330631e9900' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>lat</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-71.15</div><input id='attrs-055362e6-7af4-4b1b-96d6-e077ae738602' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-055362e6-7af4-4b1b-96d6-e077ae738602' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e7091ab3-8f1f-4ec3-ac57-a1086224f63c' class='xr-var-data-in' type='checkbox'><label for='data-e7091ab3-8f1f-4ec3-ac57-a1086224f63c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array(-71.15183246)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lon</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.25</div><input id='attrs-b72cb786-2b9a-488f-b00f-674bbf90dac9' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b72cb786-2b9a-488f-b00f-674bbf90dac9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1abc9860-65cb-46bb-9b5a-cad7549d02aa' class='xr-var-data-in' type='checkbox'><label for='data-1abc9860-65cb-46bb-9b5a-cad7549d02aa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array(1.25)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-7e0ccd44-0a0a-48ba-93e3-b9ca259f964e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7e0ccd44-0a0a-48ba-93e3-b9ca259f964e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2f3899fa-dcd0-4dcb-b512-7744c5e7b8e2' class='xr-var-data-in' type='checkbox'><label for='data-2f3899fa-dcd0-4dcb-b512-7744c5e7b8e2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-79aec4ae-c818-4962-807d-c3fe8149c531' class='xr-section-summary-in' type='checkbox'  ><label for='section-79aec4ae-c818-4962-807d-c3fe8149c531' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-4a1983f2-28d4-4ea5-a765-4c553ffcabb2' class='xr-index-data-in' type='checkbox'/><label for='index-4a1983f2-28d4-4ea5-a765-4c553ffcabb2' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6b062cea-c92f-4544-bb9a-6af4029dac45' class='xr-section-summary-in' type='checkbox'  ><label for='section-6b062cea-c92f-4544-bb9a-6af4029dac45' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>Reference height temperature</dd><dt><span>cell_methods :</span></dt><dd>time: mean</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">computed</span> <span class="o">=</span> <span class="n">rolling_mean</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>  <span class="c1"># activity on dashboard</span>
<span class="n">computed</span>  <span class="c1"># has real numpy values</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;TREFHT&#x27; (time: 1032, lat: 192, lon: 288)&gt;
nan nan nan nan nan nan nan nan ... 273.4 273.4 273.4 273.4 273.4 273.4 273.4
Coordinates:
  * lat      (lat) float64 -90.0 -89.06 -88.12 -87.17 ... 87.17 88.12 89.06 90.0
  * lon      (lon) float64 0.0 1.25 2.5 3.75 5.0 ... 355.0 356.2 357.5 358.8
  * time     (time) object 2015-02-01 00:00:00 ... 2101-01-01 00:00:00
Attributes: (3)</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'TREFHT'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 1032</li><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>lon</span>: 288</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-8f1a5c30-ba9d-4054-99cf-96dedd61d3d7' class='xr-array-in' type='checkbox' ><label for='section-8f1a5c30-ba9d-4054-99cf-96dedd61d3d7' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>nan nan nan nan nan nan nan ... 273.4 273.4 273.4 273.4 273.4 273.4</span></div><div class='xr-array-data'><pre>array([[[      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        ...,
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan]],

       [[      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan],
        [      nan,       nan,       nan, ...,       nan,       nan,
               nan],
...
        [273.74554, 273.74554, 273.74585, ..., 273.74713, 273.7464 ,
         273.74585],
        [273.8277 , 273.8276 , 273.8277 , ..., 273.82904, 273.82837,
         273.82794],
        [273.91922, 273.91898, 273.91876, ..., 273.92017, 273.91986,
         273.9195 ]],

       [[232.90976, 232.90982, 232.90984, ..., 232.90979, 232.90979,
         232.90979],
        [233.47034, 233.4355 , 233.28328, ..., 233.49512, 233.49011,
         233.48125],
        [233.8564 , 233.81363, 233.79611, ..., 234.08301, 234.03255,
         233.96402],
        ...,
        [273.20447, 273.2046 , 273.2051 , ..., 273.20523, 273.20477,
         273.20453],
        [273.29013, 273.28958, 273.28906, ..., 273.2929 , 273.29178,
         273.29086],
        [273.3635 , 273.36328, 273.36313, ..., 273.36423, 273.36398,
         273.3637 ]]], dtype=float32)</pre></div></div></li><li class='xr-section-item'><input id='section-64d43146-2567-4c1c-a2b0-8cf4439aeeb1' class='xr-section-summary-in' type='checkbox'  checked><label for='section-64d43146-2567-4c1c-a2b0-8cf4439aeeb1' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-6a21d7ef-a80d-4de1-81de-0483a3a5624e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6a21d7ef-a80d-4de1-81de-0483a3a5624e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b52332c8-8116-4ba8-a247-606896d22077' class='xr-var-data-in' type='checkbox'><label for='data-b52332c8-8116-4ba8-a247-606896d22077' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><div class='xr-var-data'><pre>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-e5abb3f3-f0bf-483c-8f4c-2cf35de2eec7' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e5abb3f3-f0bf-483c-8f4c-2cf35de2eec7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dc7f4dd9-5a51-4a91-b6aa-15b590d3e306' class='xr-var-data-in' type='checkbox'><label for='data-dc7f4dd9-5a51-4a91-b6aa-15b590d3e306' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><div class='xr-var-data'><pre>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>2015-02-01 00:00:00 ... 2101-01-...</div><input id='attrs-58304d8b-9980-4de9-96a9-1daed31fc5ba' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-58304d8b-9980-4de9-96a9-1daed31fc5ba' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f998e794-0139-4f58-8d50-3736be9f7545' class='xr-var-data-in' type='checkbox'><label for='data-f998e794-0139-4f58-8d50-3736be9f7545' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>time</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd></dl></div><div class='xr-var-data'><pre>array([cftime.DatetimeNoLeap(2015, 2, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 3, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2015, 4, 1, 0, 0, 0, 0, has_year_zero=True), ...,
       cftime.DatetimeNoLeap(2100, 11, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2100, 12, 1, 0, 0, 0, 0, has_year_zero=True),
       cftime.DatetimeNoLeap(2101, 1, 1, 0, 0, 0, 0, has_year_zero=True)],
      dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cfcc03e1-1bab-49c9-99c2-03c081b6df87' class='xr-section-summary-in' type='checkbox'  ><label for='section-cfcc03e1-1bab-49c9-99c2-03c081b6df87' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>lat</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-0330051a-0a6c-49a9-887a-194d7905cac3' class='xr-index-data-in' type='checkbox'/><label for='index-0330051a-0a6c-49a9-887a-194d7905cac3' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([             -90.0, -89.05759162303664,  -88.1151832460733,
       -87.17277486910994,  -86.2303664921466, -85.28795811518324,
        -84.3455497382199, -83.40314136125654, -82.46073298429319,
       -81.51832460732984,
       ...
        81.51832460732984,  82.46073298429319,  83.40314136125654,
         84.3455497382199,  85.28795811518324,   86.2303664921466,
        87.17277486910994,   88.1151832460733,  89.05759162303664,
                     90.0],
      dtype=&#x27;float64&#x27;, name=&#x27;lat&#x27;, length=192))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>lon</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-2d559b76-6524-4685-aaf1-7b6ddabe74fb' class='xr-index-data-in' type='checkbox'/><label for='index-2d559b76-6524-4685-aaf1-7b6ddabe74fb' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([   0.0,   1.25,    2.5,   3.75,    5.0,   6.25,    7.5,   8.75,   10.0,
        11.25,
       ...
        347.5, 348.75,  350.0, 351.25,  352.5, 353.75,  355.0, 356.25,  357.5,
       358.75],
      dtype=&#x27;float64&#x27;, name=&#x27;lon&#x27;, length=288))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-3014fa3f-7b4c-4dae-b255-86b6c1ab46f7' class='xr-index-data-in' type='checkbox'/><label for='index-3014fa3f-7b4c-4dae-b255-86b6c1ab46f7' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(CFTimeIndex([2015-02-01 00:00:00, 2015-03-01 00:00:00, 2015-04-01 00:00:00,
             2015-05-01 00:00:00, 2015-06-01 00:00:00, 2015-07-01 00:00:00,
             2015-08-01 00:00:00, 2015-09-01 00:00:00, 2015-10-01 00:00:00,
             2015-11-01 00:00:00,
             ...
             2100-04-01 00:00:00, 2100-05-01 00:00:00, 2100-06-01 00:00:00,
             2100-07-01 00:00:00, 2100-08-01 00:00:00, 2100-09-01 00:00:00,
             2100-10-01 00:00:00, 2100-11-01 00:00:00, 2100-12-01 00:00:00,
             2101-01-01 00:00:00],
            dtype=&#x27;object&#x27;, length=1032, calendar=&#x27;noleap&#x27;, freq=&#x27;MS&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ed2ff96e-f3d9-42d9-85d3-c633d06e3f82' class='xr-section-summary-in' type='checkbox'  ><label for='section-ed2ff96e-f3d9-42d9-85d3-c633d06e3f82' class='xr-section-summary' >Attributes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>K</dd><dt><span>long_name :</span></dt><dd>Reference height temperature</dd><dt><span>cell_methods :</span></dt><dd>time: mean</dd></dl></div></li></ul></div></div></div></div>
</div>
</section>
</section>
<section id="optimization-and-debugging-dask">
<h2>Optimization and Debugging Dask<a class="headerlink" href="#optimization-and-debugging-dask" title="Permalink to this heading">#</a></h2>
<section id="scaling-and-performance-report">
<h3>Scaling and Performance Report<a class="headerlink" href="#scaling-and-performance-report" title="Permalink to this heading">#</a></h3>
<p>Now, let’s see what speedup we can get by manually scaling up our computation by 2x. This is not possible (<em>beyond a certain hardware limit</em>) on a <code class="docutils literal notranslate"><span class="pre">LocalCluster</span></code>, but is easy to do using <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code>!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale the cluster to 4 workers</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">wait_for_workers</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># How does this look in PBS?</span>
<span class="o">!</span>qstat<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                                                            Req&#39;d  Req&#39;d   Elap
Job ID          Username Queue    Jobname    SessID NDS TSK Memory Time  S Time
--------------- -------- -------- ---------- ------ --- --- ------ ----- - -----
9368874.casper* negins   htc      STDIN       10374   1   1   16gb 24:00 R 02:08
9369492.casper* negins   htc      dask-wk23*  63091   1   1    4gb 00:30 R 00:06
9369493.casper* negins   htc      dask-wk23*  53109   1   1    4gb 00:30 R 00:06
9369522.casper* negins   htc      dask-wk23*    --    1   1    4gb 00:30 R   -- 
9369523.casper* negins   htc      dask-wk23*    --    1   1    4gb 00:30 R   -- 
</pre></div>
</div>
</div>
</div>
<p>One downside of scaling is that you end up with a worker pool that has different amounts of wallclock time remaining. The flow of your script across time is something to consider - if you need to spin up more workers after some collection of them has used significant walltime, it may make sense to first scale down your cluster to zero (or run <code class="docutils literal notranslate"><span class="pre">client.restart()</span></code>) and then instantiate the new workers.</p>
<p>Here, we will also demonstrate another type of performance monitoring provided by <code class="docutils literal notranslate"><span class="pre">dask.distributed</span></code> - the <em>performance report</em>. Using a context manager, we can profile the computational components in the task stream and store it as an HTML file for future analysis. It provides a hard copy analysis of the computation, though unfortunately it does not record worker memory usage.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s try generating a &quot;performance report&quot; this time</span>
<span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">performance_report</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Since metrics are captured live anyway, the overhead from the report is small</span>
<span class="k">with</span> <span class="n">performance_report</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;dask-report.html&quot;</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">computed</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">File</span> <span class="o">&lt;</span><span class="n">timed</span> <span class="n">exec</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">3</span>

<span class="ne">NameError</span>: name &#39;computed&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Hopefully, we see a significant improvement in time-to-solution using 2x the workers.</p>
<p>Another improvement we can make to our computation is to reduce the size of the problem down as much as possible before doing meaningful work. Let’s try rearranging our graph:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create our improved task graph</span>
<span class="n">tref_mean_graph</span> <span class="o">=</span> <span class="n">tref</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lon</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">lat</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span><span class="s2">&quot;lon&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="n">this</span> <span class="n">case</span><span class="p">,</span> <span class="n">optimizations</span> <span class="n">to</span> <span class="n">the</span> <span class="n">base</span> <span class="n">operation</span> <span class="n">can</span> <span class="k">yield</span> <span class="n">better</span> <span class="n">speed</span> <span class="n">improvements</span> <span class="n">than</span> <span class="n">doubling</span> <span class="n">the</span> <span class="n">dask</span> <span class="n">worker</span> <span class="n">count</span><span class="o">.</span> <span class="n">Optimize</span> <span class="n">your</span> <span class="n">workflow</span> <span class="n">first</span><span class="p">,</span> <span class="k">if</span> <span class="n">possible</span> <span class="o">-</span> <span class="n">then</span> <span class="n">parallelize</span> <span class="k">with</span> <span class="n">Dask</span> <span class="k">if</span> <span class="n">still</span> <span class="n">necessary</span><span class="o">.</span>

<span class="n">Let</span><span class="s1">&#39;s plot our results again to inspect for differences.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">38</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
    <span class="n">Let</span><span class="s1">&#39;s plot our results again to inspect for differences.</span>
       <span class="o">^</span>
<span class="ne">SyntaxError</span>: unterminated string literal (detected at line 3)
</pre></div>
</div>
</div>
</div>
<section id="adaptive-scaling">
<h4>Adaptive scaling<a class="headerlink" href="#adaptive-scaling" title="Permalink to this heading">#</a></h4>
<p>For interactive, exploratory work, <em><a class="reference external" href="https://docs.dask.org/en/stable/how-to/adaptive.html">adaptive scaling</a></em> can be useful (also very useful on cloud platforms). This allows the cluster to dynamically scale up and down based on the (Dask) scheduler’s estimation of resource needs. This capability is highly customizable, but one basic method would be to set bounds on the number of worker jobs that can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">minimum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">maximum</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<p>Another benefit of adaptive scaling is that you can use the worker <code class="docutils literal notranslate"><span class="pre">--lifetime</span></code> argument to tell Dask to cleanly end work on a worker and restart the PBS job. If you stagger the start of your workers, Dask will be able to shuffle tasks appropriately to produce a so-called <em><a class="reference external" href="https://jobqueue.dask.org/en/latest/advanced-tips-and-tricks.html#how-to-handle-job-queueing-system-walltime-killing-workers">infinite workload</a></em>.</p>
<p>On busy systems, adaptive scaling can slow down bursty computations because of queue waits between scale-down and scale-up cycles.</p>
</section>
</section>
<section id="optimization-persisting-data-in-worker-memory">
<h3>Optimization: Persisting data in worker memory<a class="headerlink" href="#optimization-persisting-data-in-worker-memory" title="Permalink to this heading">#</a></h3>
<p>Sometimes you will need to compute multiple parameters on data from Dask objects. Using <code class="docutils literal notranslate"><span class="pre">.persist()</span></code> to store intermediate data in worker memory can save computational time if used appropriately. The raw data can be persisted too, of course, but watch out for exhausting worker memory.</p>
<p>Here we compare the time it takes - with and without persisting intermediate results - to compute our level-0 mean, a level-10 mean, and a mean across all model levels.</p>
<p>We will also introduce another diagnostic tool here, the <code class="docutils literal notranslate"><span class="pre">MemorySampler</span></code> context manager.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">distributed.diagnostics</span> <span class="kn">import</span> <span class="n">MemorySampler</span>
<span class="n">ms</span> <span class="o">=</span> <span class="n">MemorySampler</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Without persistance</span>
<span class="k">with</span> <span class="n">ms</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="s2">&quot;Original&quot;</span><span class="p">):</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lev</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lon</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">lat</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span><span class="s2">&quot;lon&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lev</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lon</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">lat</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span><span class="s2">&quot;lon&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
    <span class="n">ra</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lon</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">lat</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="s2">&quot;lev&quot;</span><span class="p">,</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span><span class="s2">&quot;lon&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># With persistance</span>
<span class="k">with</span> <span class="n">ms</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="s2">&quot;Persist&quot;</span><span class="p">):</span>
    <span class="n">T_means</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">lon</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">lat</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span><span class="s2">&quot;lon&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">persist</span><span class="p">()</span>
    <span class="n">r1</span> <span class="o">=</span> <span class="n">T_means</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lev</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
    <span class="n">r2</span> <span class="o">=</span> <span class="n">T_means</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">lev</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
    <span class="n">ra</span> <span class="o">=</span> <span class="n">T_means</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="s2">&quot;lev&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Without</span> <span class="n">persisting</span> <span class="n">the</span> <span class="n">intermediate</span> <span class="n">results</span><span class="p">,</span> <span class="n">Dask</span> <span class="n">will</span> <span class="n">only</span> <span class="n">store</span> <span class="n">r1</span> <span class="ow">and</span> <span class="n">r2</span> <span class="ow">in</span> <span class="n">worker</span> <span class="n">memory</span><span class="p">,</span> <span class="ow">and</span> <span class="n">so</span> <span class="n">the</span> <span class="n">indexing</span> <span class="n">operations</span> <span class="n">must</span> <span class="n">be</span> <span class="n">done</span> <span class="kn">from</span> <span class="nn">scratch</span> <span class="n">each</span> <span class="n">time</span><span class="o">.</span>

<span class="n">Let</span><span class="s1">&#39;s look at the memory usage...</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ms</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Because the intermediate results are required for the second calculation in the original case, we do not even use more memory. A clear win!</p>
<p>Of course, when persisting data it is extra important to clean up. Running <code class="docutils literal notranslate"><span class="pre">del</span></code> on your persisted client variable will clear those data from worker memory (<em>as long as they are not referenced by other variables</em>). The <strong>progress</strong> dashboard is a useful reminder that we have data persisted.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">T_means</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Close current workers</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="debugging-workers-case-study-memory-and-spill-to-disk">
<h3>Debugging workers case study: memory and spill-to-disk<a class="headerlink" href="#debugging-workers-case-study-memory-and-spill-to-disk" title="Permalink to this heading">#</a></h3>
<p>In this section, we will demonstrate two common considerations when using Dask on HPC:</p>
<ul class="simple">
<li><p>Dask data spilling to disk</p></li>
<li><p>Interacting with <code class="docutils literal notranslate"><span class="pre">dask.distributed</span></code> worker logs</p></li>
</ul>
<p>For this case study, we will generate progressively larger Dask arrays that eventually trigger memory conditions. Dask workers handle data in different ways in the following memory regimes:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Suggested Threshold</p></th>
<th class="head"><p>Case Study Value</p></th>
<th class="head"><p>Worker Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0.6 (managed mem)</p></td>
<td><p>2.4 GB</p></td>
<td><p>Data is allocated on disk (spill)</p></td>
</tr>
<tr class="row-odd"><td><p>0.7 (process mem)</p></td>
<td><p>2.8 GB</p></td>
<td><p>Data is allocated on disk (spill)</p></td>
</tr>
<tr class="row-even"><td><p>0.8</p></td>
<td><p>3.2 GB</p></td>
<td><p>New data allocation is paused</p></td>
</tr>
<tr class="row-odd"><td><p>0.95</p></td>
<td><p>3.8 GB</p></td>
<td><p>Worker is killed to avoid OOM</p></td>
</tr>
</tbody>
</table>
<p>These thresholds can be set at cluster creation time or overridden by your Dask Distributed configuration file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dask.array</span> <span class="k">as</span> <span class="nn">da</span>
<span class="kn">from</span> <span class="nn">distributed.worker</span> <span class="kn">import</span> <span class="n">logger</span>
</pre></div>
</div>
</div>
</div>
<p>It is possible to write directly to worker logs (PBS job logs in our case) using the worker <code class="docutils literal notranslate"><span class="pre">logger</span></code> from Dask Distributed. Here, we define a function to call the logger on each worker, which we will run eagerly via <code class="docutils literal notranslate"><span class="pre">client.run</span></code>.</p>
<p>Keep an eye on the worker memory Dashboard panel as our for loop proceeds…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">log_message</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Current chunk size = </span><span class="si">{}</span><span class="s2"> MiB&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start up 4 new workers</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">wait_for_workers</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">chunk_mib</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1600</span><span class="p">,</span> <span class="mi">2400</span><span class="p">,</span> <span class="mi">3200</span><span class="p">,</span> <span class="mi">3900</span><span class="p">]:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">log_message</span><span class="p">,</span> <span class="n">chunk_mib</span><span class="p">)</span>
    <span class="n">chunk_size</span> <span class="o">=</span> <span class="n">chunk_mib</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean of </span><span class="si">{}</span><span class="s2"> MiB random array = </span><span class="si">{:0.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chunk_mib</span><span class="p">,</span> <span class="n">da</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">chunk_size</span> <span class="o">*</span> <span class="mi">4</span><span class="p">),</span> <span class="n">chunks</span><span class="o">=</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">()))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># List the most recent 4 worker logs - these should be our logs</span>
<span class="o">!</span>ls<span class="w"> </span>-lrt<span class="w"> </span>dask-worker-logs<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
</div>
</div>
<p>We can open the log file in the Lab interface or a terminal and investigate the reason for the <code class="docutils literal notranslate"><span class="pre">KilledWorker</span></code> exception.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s look at the worker state in PBS after the failure</span>
<span class="o">!</span>qstat<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span>
</pre></div>
</div>
</div>
</div>
<p>Notice how the workers retried the final computation a few times before giving up. This behavior occurs when using the <code class="docutils literal notranslate"><span class="pre">nanny</span></code>, which attempts to restore workers when they are killed for various exceptions. (<em>the nanny is an additional lightweight process that monitors the health of the worker and enables functionality like full cluster restart</em>)</p>
<p>Recall the aforementined memory thresholds - workers get killed by Dask before exceeding the absolute limit of a job (which if hit on certain systems, could kill the PBS job too). Because of this safety mechanism, our PBS jobs are still intact.</p>
<p>If you are running a long computation that, <em>if restarted</em>, could exhaust the worker job’s walltime, you can disable the nanny functionality and make exceptions fatal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Shut down our client (thus terminating workers)</span>
<span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="supplementary-material-advanced-workflows-and-automatic-parallelization-using-apply-ufunc">
<h3>Supplementary Material: Advanced workflows and automatic parallelization using <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code><a class="headerlink" href="#supplementary-material-advanced-workflows-and-automatic-parallelization-using-apply-ufunc" title="Permalink to this heading">#</a></h3>
<p>Most of xarray’s built-in operations work on Dask arrays. If you want to use a function that isn’t wrapped by Xarray to work with Dask, one option is to extract Dask arrays from xarray objects (.data) and use Dask directly.</p>
<p>Another option is to use xarray’s <code class="docutils literal notranslate"><span class="pre">apply_ufunc()</span></code> function. <code class="docutils literal notranslate"><span class="pre">xr.apply_ufunc()</span></code> can automate embarrassingly parallel “map” type operations where a function written for processing NumPy arrays, but we want to apply it on our Xarray DataArray.</p>
<p><code class="docutils literal notranslate"><span class="pre">xr.apply_ufunc()</span></code> give users capability to run custom-written functions such as parameter calculations in a parallel way. See the <a class="reference external" href="https://tutorial.xarray.dev/advanced/apply_ufunc/apply_ufunc.html">Xarray tutorial material on apply_ufunc</a> for more.</p>
<p>In the example below, we calculate the saturation vapor pressure by using <code class="docutils literal notranslate"><span class="pre">apply_ufunc()</span></code> to apply this function to our Dask Array chunk by chunk.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">sat_p</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate saturation vapor pressure using Clausius-Clapeyron equation&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mf">0.611</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">17.67</span> <span class="o">*</span> <span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="mf">273.15</span><span class="p">)</span><span class="o">*</span><span class="p">((</span><span class="n">t</span><span class="o">-</span><span class="mf">29.65</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">es</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">apply_ufunc</span><span class="p">(</span><span class="n">sat_p</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">dask</span><span class="o">=</span><span class="s2">&quot;parallelized&quot;</span><span class="p">,</span> <span class="n">output_dtypes</span><span class="o">=</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span>
<span class="n">es</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">es</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>The data used for this tutorial is from one ensemble member. What if we want to use multiple ensemble members? So far, we only run on one machine, what if we run an HPC cluster? We will go over this in the next tutorial.</p>
</section>
<section id="dask-xarray-good-practices">
<h3>Dask + Xarray Good Practices<a class="headerlink" href="#dask-xarray-good-practices" title="Permalink to this heading">#</a></h3>
<div class="alert alert-success fade show" markdown="1">
<p><b>Summary of Dask + Xarray Good Practices</b></p>
<p>The good practices regarding Dask + Xarray is the same as the good practices for Dask only.</p>
<ul class="simple">
<li><p>Similar to Dask DataFrames, it is more efficient to first do spatial and temporal indexing (e.g. .sel() or .isel()) and filter the dataset early in the pipeline, especially before calling resample() or groupby().</p></li>
<li><p>Chunk sizes should be small enough to fit into the memory at once but large enough to avoid the additional communication overhead. Good chunk size ~100 MB.</p></li>
<li><p>It is always better to chunk along the <code class="docutils literal notranslate"><span class="pre">time</span></code> dimension.</p></li>
<li><p>Avoid too many tasks since each task will introduce 1ms of overhead.</p></li>
<li><p>When possible, use <code class="docutils literal notranslate"><span class="pre">xr.apply_ufunc</span></code> to apply an unvectorized function to the Xarray object.</p></li>
</ul>
</div>
</section>
<section id="close-you-local-dask-cluster">
<h3>Close you local Dask Cluster<a class="headerlink" href="#close-you-local-dask-cluster" title="Permalink to this heading">#</a></h3>
<p>It is always a good practice to close the Dask cluster you created.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>In this notebook, we have learned about:</p>
<ul class="simple">
<li><p>Using Dask with Xarray</p></li>
<li><p>Read/write netCDF files with Dask</p></li>
<li><p>Dask backed Xarray objects and operations</p></li>
<li><p>Extract Dask arrays from Xarray objects and use Dask array directly..</p></li>
<li><p>Customized workflows using <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code></p></li>
</ul>
</section>
<section id="resources-and-references">
<h2>Resources and references<a class="headerlink" href="#resources-and-references" title="Permalink to this heading">#</a></h2>
<section id="reference">
<h3>Reference<a class="headerlink" href="#reference" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.dask.org/en/stable/array.html">Dask Array Docs</a></p></li>
<li><p><a class="reference external" href="https://examples.dask.org/">Dask Examples</a></p></li>
<li><p><a class="reference external" href="https://github.com/dask/dask/">Dask Code</a></p></li>
<li><p><a class="reference external" href="https://blog.dask.org/">Dask Blog</a></p></li>
<li><p><a class="reference external" href="https://xarray.pydata.org/">Xarray Docs</a></p></li>
<li><p><a class="reference external" href="https://docs.xarray.dev/en/stable/user-guide/dask.html">Xarray + Dask docs</a>, particularly the <a class="reference external" href="https://docs.xarray.dev/en/stable/user-guide/dask.html#optimization-tips">optimization tips</a></p></li>
<li><p><a class="reference external" href="https://tutorial.xarray.dev/intro.html">Xarray Tutorial material</a></p></li>
</ul>
</section>
<section id="ask-for-help">
<h3>Ask for help<a class="headerlink" href="#ask-for-help" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="http://stackoverflow.com/questions/tagged/dask"><code class="docutils literal notranslate"><span class="pre">dask</span></code></a> tag on Stack Overflow, for usage questions</p></li>
<li><p><a class="reference external" href="https://github.com/dask/dask/discussions">github discussions: dask</a> for general, non-bug, discussion, and usage questions</p></li>
<li><p><a class="reference external" href="https://github.com/dask/dask/issues/new">github issues: dask</a> for bug reports and feature requests</p></li>
<li><p><a class="reference external" href="https://github.com/pydata/xarray/discussions">github discussions: xarray</a> for general, non-bug, discussion, and usage questions</p></li>
<li><p><a class="reference external" href="https://github.com/pydata/xarray/issues/new">github issues: xarray</a> for bug reports and feature requests</p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "npl-2024a"
        },
        kernelOptions: {
            name: "npl-2024a",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'npl-2024a'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="01-xarray-intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction to Xarray</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#in-this-tutorial-you-learn">In this tutorial, you learn:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction-to-dask">Introduction to Dask</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-dask">Why Dask?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#familiar-interface">Familiar Interface</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scalability">Scalability</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flexibility">Flexibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-diagnostic-tools">Built-in Diagnostic Tools</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#when-to-use-dask">When to use Dask?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-dask">Use Dask:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avoid-dask">Avoid Dask:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-components">Dask Components</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-collections">1.  Dask Collections</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#high-level-collections">High-level collections</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#low-level-collections">Low-level collections</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-task-scheduling">2. Dynamic Task Scheduling</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying-dask-cluster">Deploying Dask Cluster</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#starting-hpc-dask-clusters-with-dask-jobqueue">Starting HPC Dask clusters with <code class="docutils literal notranslate"><span class="pre">dask-jobqueue</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-scheduled-cluster">Creating a scheduled-cluster</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#it-is-good-practice-to-check-your-validate-your-cluster-before-initiating-any-workers-by-outputting-the-job-script-dask-will-create">It is good practice to check your validate your cluster before initiating any workers, by outputting the job script Dask will create</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-configuration-files">Dask configuration files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#live-performance-monitoring">Live Performance Monitoring</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-multiple-netcdf-files-with-open-mfdataset">Reading Multiple NetCdf Files with <code class="docutils literal notranslate"><span class="pre">open_mfdataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xarray-data-structures-are-dask-collections">Xarray data structures are Dask collections.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-concrete-values">Getting concrete values</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distributed-non-blocking-concrete-values">Distributed non-blocking concrete values</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-access-underlying-data-in-an-xarray-object">How to access underlying data in an Xarray object?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#computations-and-indexing">Computations and Indexing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-single-point-calculations">Example Single Point Calculations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations-over-all-grids">Calculations over all grids</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-and-debugging-dask">Optimization and Debugging Dask</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scaling-and-performance-report">Scaling and Performance Report</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#adaptive-scaling">Adaptive scaling</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-persisting-data-in-worker-memory">Optimization: Persisting data in worker memory</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-workers-case-study-memory-and-spill-to-disk">Debugging workers case study: memory and spill-to-disk</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supplementary-material-advanced-workflows-and-automatic-parallelization-using-apply-ufunc">Supplementary Material: Advanced workflows and automatic parallelization using <code class="docutils literal notranslate"><span class="pre">apply_ufunc</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dask-xarray-good-practices">Dask + Xarray Good Practices</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#close-you-local-dask-cluster">Close you local Dask Cluster</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#resources-and-references">Resources and references</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reference">Reference</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ask-for-help">Ask for help</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Negin Sobhani, Brian Vanderwende, Ben Kirk
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>